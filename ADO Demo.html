<!DOCTYPE html><html lang="es"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>blauLabs - Demo ADO Fleet Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'blau-primary': '#1e293b',
                        'blau-dark': '#0f172a',
                        'ado-red': '#dc2626',
                        'ado-orange': '#ea580c'
                    }
                }
            }
        }
    </script>
    <style>
        .sidebar-icon {
            transition: all 0.2s ease;
        }
        .sidebar-icon:hover {
            transform: scale(1.1);
            background-color: rgba(255, 255, 255, 0.1);
        }
        .notification-badge {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        .kpi-card {
            transition: all 0.3s ease;
        }
        .kpi-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .pulse-dot {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        .status-operational { background-color: #22c55e; }
        .status-warning { background-color: #f59e0b; }
        .status-critical { background-color: #ef4444; }
        .status-maintenance { background-color: #6b7280; }
        
        /* Sidebar Navigation Styles */
        .sidebar-nav-item.active {
            background-color: rgba(59, 130, 246, 0.3);
            border-right: 3px solid #3b82f6;
        }
        .sidebar-text {
            transition: opacity 0.3s ease;
        }
        #sidebar.expanded {
            width: 16rem;
        }
        #sidebar.expanded .sidebar-text {
            opacity: 1;
        }
        
        /* Tab Content */
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body class="bg-gray-50 dark:bg-gray-900 font-sans">
    <!-- Main Container -->
    <div class="flex h-screen">
        <!-- Left Sidebar -->
        <div id="sidebar" class="w-16 bg-blau-primary dark:bg-blau-dark flex flex-col py-4 shadow-lg transition-all duration-300 overflow-hidden flex-shrink-0 z-30">
            <!-- Navigation Icons -->
            <div class="flex flex-col space-y-4 mt-6">
                <!-- Dashboard/Overview -->
                <div id="nav-dashboard" class="sidebar-nav-item active flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-tachometer-alt text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Dashboard</span>
                </div>
                
                <!-- Fleet Management -->
                <div id="nav-fleet" class="sidebar-nav-item flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-bus text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Fleet Management</span>
                </div>
                
                <!-- Efficiency Management -->
                <div id="nav-efficiency" class="sidebar-nav-item flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-chart-line text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Efficiency Management</span>
                </div>
                
                <!-- Predictive Maintenance -->
                <div id="nav-maintenance" class="sidebar-nav-item flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-tools text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Predictive Maintenance</span>
                </div>
                
                <!-- Divider -->
                <div class="border-t border-white/20 mx-4 my-2"></div>
                
                <!-- Notifications with Badge -->
                <div id="nav-alerts" class="sidebar-nav-item relative flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0 relative">
                        <i class="fas fa-bell text-white text-lg"></i>
                        <div class="notification-badge absolute -top-2 -right-2 w-5 h-3 rounded-full flex items-center justify-center">
                            <span class="text-white text-xs font-semibold">23</span>
                        </div>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Alertas Hist√≥ricas</span>
                </div>
                
                <!-- Mobile App -->
                <div id="nav-mobile" class="sidebar-nav-item flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-mobile-alt text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Mobile App</span>
                </div>
            </div>
            
            <!-- Bottom Section -->
            <div class="mt-auto flex flex-col space-y-4">
                <!-- Settings -->
                <div class="flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i class="fas fa-cog text-white text-lg"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Settings</span>
                </div>
                
                <!-- Expand/Collapse Arrow -->
                <div id="toggleSidebar" class="flex items-center px-4 py-3 cursor-pointer hover:bg-white/10 transition-colors">
                    <div class="w-6 h-6 flex items-center justify-center flex-shrink-0">
                        <i id="toggleIcon" class="fas fa-chevron-right text-white text-lg transition-transform duration-300"></i>
                    </div>
                    <span class="sidebar-text ml-4 text-white font-medium whitespace-nowrap opacity-0">Expand</span>
                </div>
            </div>
        </div>
        
        <!-- Main Content Area -->
        <div class="flex-1 bg-gray-50 dark:bg-gray-800 flex flex-col">
            <!-- Top Bar -->
            <div class="bg-blau-primary dark:bg-blau-dark shadow-sm border-b border-blau-dark/20">
                <div class="flex items-center justify-between px-6 py-3">
                    <div class="flex-1">
                        <div class="flex items-center space-x-4">
                            <img src="https://pfst.cf2.poecdn.net/base/image/9efe704e01d5a6f7a7b329f4d99687dc3103ba2dea921e54ad9be4a0267d6913?w=318&amp;h=130" alt="blauLabs" class="h-8 w-auto">
                            <div class="text-white">
                                <span class="text-lg font-semibold">ADO Fleet Management</span>
                                <div class="text-sm text-gray-300">Dashboard de Monitoreo en Tiempo Real</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="flex items-center space-x-4">
                        <div class="max-w-md">
                            <div class="relative">
                                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                    <i class="fas fa-search text-gray-300 text-sm"></i>
                                </div>
                                <input type="text" class="block w-full pl-10 pr-3 py-2 border border-gray-600 rounded-md leading-5 bg-gray-700 text-gray-200 placeholder-gray-400 focus:outline-none focus:bg-gray-600 focus:border-blue-300 focus:ring-1 focus:ring-blue-300 text-base" placeholder="Buscar unidad, ruta...">
                            </div>
                        </div>
                        
                        <button class="p-2 text-gray-300 hover:text-white hover:bg-white/10 rounded-md transition-colors">
                            <i class="fas fa-bell text-lg"></i>
                        </button>
                        
                        <div class="relative">
                            <button id="userDropdown" class="flex items-center space-x-2 bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md transition-colors">
                                <i class="fas fa-user text-sm"></i>
                                <span class="font-medium text-sm">ADO Manager</span>
                                <i class="fas fa-chevron-down text-xs"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Content Area -->
            <div class="flex-1 overflow-auto">
                <!-- Dashboard Tab Content (Default) -->
                <div id="content-dashboard" class="tab-content active p-6">
                <!-- Main KPI Cards Row -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <!-- Fleet Status -->
                    <div class="kpi-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Unidades Operativas</p>
                                <p class="text-3xl font-bold text-gray-900 dark:text-white">1,247</p>
                                <p class="text-sm text-green-600 dark:text-green-400">
                                    <i class="fas fa-bus mr-1"></i> 92.5% de la flota
                                </p>
                            </div>
                            <div class="p-3 bg-green-100 dark:bg-green-900 rounded-full">
                                <i class="fas fa-bus text-green-600 dark:text-green-400 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Active Routes -->
                    <div class="kpi-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-blue-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Rutas Activas</p>
                                <p class="text-3xl font-bold text-gray-900 dark:text-white">47</p>
                                <p class="text-sm text-blue-600 dark:text-blue-400">
                                    <i class="fas fa-route mr-1"></i> 892 unidades en carretera
                                </p>
                            </div>
                            <div class="p-3 bg-blue-100 dark:bg-blue-900 rounded-full">
                                <i class="fas fa-route text-blue-600 dark:text-blue-400 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Critical Alerts -->
                    <div class="kpi-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-red-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Alertas Cr√≠ticas</p>
                                <p class="text-3xl font-bold text-gray-900 dark:text-white">12</p>
                                <p class="text-sm text-red-600 dark:text-red-400">
                                    <i class="fas fa-exclamation-triangle mr-1"></i> Atenci√≥n inmediata
                                </p>
                            </div>
                            <div class="p-3 bg-red-100 dark:bg-red-900 rounded-full">
                                <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400 text-xl"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Workshop Status -->
                    <div class="kpi-card bg-white dark:bg-gray-800 rounded-lg shadow-md p-6 border-l-4 border-orange-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Talleres Disponibles</p>
                                <p class="text-3xl font-bold text-gray-900 dark:text-white">8/15</p>
                                <p class="text-sm text-orange-600 dark:text-orange-400">
                                    <i class="fas fa-wrench mr-1"></i> 89 unidades en servicio
                                </p>
                            </div>
                            <div class="p-3 bg-orange-100 dark:bg-orange-900 rounded-full">
                                <i class="fas fa-tools text-orange-600 dark:text-orange-400 text-xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Secondary KPI Cards Row -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8">
                    <!-- Supervisors Active -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border-l-4 border-purple-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-gray-600 dark:text-gray-400">Supervisores</p>
                                <p class="text-xl font-bold text-gray-900 dark:text-white">23</p>
                                <p class="text-xs text-purple-600 dark:text-purple-400">En turno</p>
                            </div>
                            <div class="p-2 bg-purple-100 dark:bg-purple-900 rounded-full">
                                <i class="fas fa-user-tie text-purple-600 dark:text-purple-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Cost Efficiency -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border-l-4 border-green-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-gray-600 dark:text-gray-400">Ahorro Mensual</p>
                                <p class="text-xl font-bold text-gray-900 dark:text-white">5.2%</p>
                                <p class="text-xs text-green-600 dark:text-green-400">vs. objetivo</p>
                            </div>
                            <div class="p-2 bg-green-100 dark:bg-green-900 rounded-full">
                                <i class="fas fa-dollar-sign text-green-600 dark:text-green-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Fuel Efficiency -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border-l-4 border-cyan-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-gray-600 dark:text-gray-400">Consumo Combustible</p>
                                <p class="text-xl font-bold text-gray-900 dark:text-white">8.7</p>
                                <p class="text-xs text-cyan-600 dark:text-cyan-400">km/L promedio</p>
                            </div>
                            <div class="p-2 bg-cyan-100 dark:bg-cyan-900 rounded-full">
                                <i class="fas fa-gas-pump text-cyan-600 dark:text-cyan-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- On-Time Performance -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border-l-4 border-indigo-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-gray-600 dark:text-gray-400">Puntualidad</p>
                                <p class="text-xl font-bold text-gray-900 dark:text-white">91.3%</p>
                                <p class="text-xs text-indigo-600 dark:text-indigo-400">llegadas a tiempo</p>
                            </div>
                            <div class="p-2 bg-indigo-100 dark:bg-indigo-900 rounded-full">
                                <i class="fas fa-clock text-indigo-600 dark:text-indigo-400"></i>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance Alerts -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-4 border-l-4 border-yellow-500">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs font-medium text-gray-600 dark:text-gray-400">Mant. Programado</p>
                                <p class="text-xl font-bold text-gray-900 dark:text-white">156</p>
                                <p class="text-xs text-yellow-600 dark:text-yellow-400">pr√≥ximos 7 d√≠as</p>
                            </div>
                            <div class="p-2 bg-yellow-100 dark:bg-yellow-900 rounded-full">
                                <i class="fas fa-calendar-check text-yellow-600 dark:text-yellow-400"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Dashboard Grid -->
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                    <!-- Fleet Status Map -->
                    <div class="lg:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Estado de Flota en Tiempo Real</h3>
                            <div class="flex items-center space-x-4 text-sm">
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                    <span class="text-gray-600 dark:text-gray-400">Operativo (1,247)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                    <span class="text-gray-600 dark:text-gray-400">Alerta (89)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                    <span class="text-gray-600 dark:text-gray-400">Cr√≠tico (12)</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-3 h-3 bg-gray-500 rounded-full mr-2"></div>
                                    <span class="text-gray-600 dark:text-gray-400">Mantenimiento (76)</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Google Maps Fleet Monitoring -->
                        <div class="bg-gray-100 dark:bg-gray-700 rounded-lg h-96 relative overflow-hidden">
                            <!-- Map Search Controls -->
                            <div class="absolute top-4 left-4 right-4 z-10 flex items-center space-x-3">
                                <div class="flex-1 relative">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400 text-sm"></i>
                                    </div>
                                    <input type="text" id="fleet-map-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-sm shadow-lg" placeholder="Buscar unidad (ej: ADO-001) o ruta...">
                                </div>
                                <button id="clear-map-search" class="px-3 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 shadow-lg text-sm">
                                    <i class="fas fa-times"></i>
                                </button>
                                <button id="center-map" class="px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 shadow-lg text-sm">
                                    <i class="fas fa-crosshairs"></i>
                                </button>
                            </div>
                            
                            <!-- Map Controls -->
                            <div class="absolute top-4 right-4 z-10 flex flex-col space-y-2">
                                <button id="toggle-routes" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 shadow-lg text-sm border border-gray-200 dark:border-gray-600">
                                    <i class="fas fa-route mr-1"></i>Rutas
                                </button>
                                <button id="toggle-traffic" class="px-3 py-2 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600 shadow-lg text-sm border border-gray-200 dark:border-gray-600">
                                    <i class="fas fa-road mr-1"></i>Tr√°fico
                                </button>
                            </div>
                            
                            <!-- Fleet Status Legend -->
                            <div class="absolute bottom-4 left-4 z-10 bg-white dark:bg-gray-800 rounded-lg shadow-lg p-3 border border-gray-200 dark:border-gray-600">
                                <h5 class="text-xs font-semibold text-gray-700 dark:text-gray-300 mb-2">Estado de Flota</h5>
                                <div class="flex flex-col space-y-1 text-xs">
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Operativo (1,247)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Mantenimiento (89)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Cr√≠tico (12)</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-3 h-3 bg-gray-500 rounded-full mr-2"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Fuera de Servicio (76)</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Google Maps Container -->
                            <div id="fleet-map" class="w-full h-full rounded-lg"></div>
                            
                            <!-- Custom Unit Tooltip (Hidden by default) -->
                            <div id="unit-tooltip" class="absolute z-20 hidden bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-xl p-4 max-w-sm">
                                <div class="flex items-center justify-between mb-2">
                                    <h5 id="tooltip-unit-id" class="font-semibold text-gray-900 dark:text-white"></h5>
                                    <span id="tooltip-status" class="px-2 py-1 rounded-full text-xs font-medium"></span>
                                </div>
                                <div class="grid grid-cols-2 gap-2 text-xs">
                                    <div>
                                        <span class="text-gray-500 dark:text-gray-400">Modelo:</span>
                                        <span id="tooltip-model" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500 dark:text-gray-400">Ruta:</span>
                                        <span id="tooltip-route" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500 dark:text-gray-400">Velocidad:</span>
                                        <span id="tooltip-speed" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                    <div>
                                        <span class="text-gray-500 dark:text-gray-400">Combustible:</span>
                                        <span id="tooltip-fuel" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                    <div class="col-span-2">
                                        <span class="text-gray-500 dark:text-gray-400">√öltimo Mantenimiento:</span>
                                        <span id="tooltip-maintenance" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                    <div class="col-span-2">
                                        <span class="text-gray-500 dark:text-gray-400">Conductor:</span>
                                        <span id="tooltip-driver" class="font-medium text-gray-900 dark:text-white ml-1"></span>
                                    </div>
                                </div>
                                <div class="mt-2 pt-2 border-t border-gray-200 dark:border-gray-600">
                                    <div class="flex items-center justify-between text-xs">
                                        <span class="text-gray-500 dark:text-gray-400">Eficiencia:</span>
                                        <div class="flex items-center">
                                            <div class="w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2">
                                                <div id="tooltip-efficiency-bar" class="h-2 rounded-full"></div>
                                            </div>
                                            <span id="tooltip-efficiency" class="font-medium text-gray-900 dark:text-white"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Predictive Maintenance Alerts -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Anal√≠tica Predictiva</h3>
                        <div class="space-y-4">
                            <div class="border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-4 rounded">
                                <div class="flex items-center">
                                    <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-red-800 dark:text-red-400">ADO-156</p>
                                        <p class="text-sm text-red-600 dark:text-red-300">Sistema de frenos: Falla predicha en 48h</p>
                                        <p class="text-xs text-red-500 dark:text-red-400">Confianza: 94%</p>
                                    </div>
                                </div>
                            </div>

                            <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded">
                                <div class="flex items-center">
                                    <i class="fas fa-wrench text-yellow-500 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-045</p>
                                        <p class="text-sm text-yellow-600 dark:text-yellow-300">Motor: Mantenimiento requerido en 5 d√≠as</p>
                                        <p class="text-xs text-yellow-500 dark:text-yellow-400">Confianza: 87%</p>
                                    </div>
                                </div>
                            </div>

                            <div class="border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/20 p-4 rounded">
                                <div class="flex items-center">
                                    <i class="fas fa-info-circle text-blue-500 mr-3"></i>
                                    <div>
                                        <p class="font-semibold text-blue-800 dark:text-blue-400">ADO-203</p>
                                        <p class="text-sm text-blue-600 dark:text-blue-300">Neum√°ticos: Revisi√≥n programada</p>
                                        <p class="text-xs text-blue-500 dark:text-blue-400">Confianza: 92%</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="mt-6 pt-4 border-t border-gray-200 dark:border-gray-700">
                            <div class="flex items-center justify-between text-sm">
                                <span class="text-gray-600 dark:text-gray-400">Ahorros estimados este mes:</span>
                                <span class="font-semibold text-green-600 dark:text-green-400">$2.3M MXN</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                    <!-- Cost Reduction Chart -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Reducci√≥n de Costos Operativos</h3>
                        <div class="h-64 w-full">
                            <canvas id="costChart"></canvas>
                        </div>
                    </div>

                    <!-- Fleet Availability Chart -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Disponibilidad de Flota por Regi√≥n</h3>
                        <div class="h-64 w-full">
                            <canvas id="availabilityChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Maintenance Optimization -->
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-md p-6">
                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Optimizaci√≥n Log√≠stica de Mantenimiento</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-3xl font-bold text-blue-600 dark:text-blue-400">15</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Talleres Optimizados</div>
                            <div class="text-xs text-green-600 dark:text-green-400 mt-1">+3 vs mes anterior</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-purple-600 dark:text-purple-400">67%</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Reducci√≥n Tiempo Traslado</div>
                            <div class="text-xs text-green-600 dark:text-green-400 mt-1">Meta: 70%</div>
                        </div>
                        <div class="text-center">
                            <div class="text-3xl font-bold text-orange-600 dark:text-orange-400">92%</div>
                            <div class="text-sm text-gray-600 dark:text-gray-400">Cumplimiento Normativo</div>
                            <div class="text-xs text-green-600 dark:text-green-400 mt-1">+5% vs trimestre anterior</div>
                        </div>
                    </div>
                </div>
                </div>
                
                <!-- Predictive Maintenance Tab Content -->
                <div id="content-maintenance" class="tab-content p-6">
                    <div class="mb-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Mantenimiento Predictivo</h1>
                                <p class="text-gray-600 dark:text-gray-400">Gesti√≥n inteligente de mantenimiento y monitoreo de unidades</p>
                            </div>
                            <div class="text-right">
                                <div class="inline-flex items-center px-4 py-2 bg-blue-100 dark:bg-blue-900/30 border border-blue-300 dark:border-blue-700 rounded-lg">
                                    <i class="fas fa-route text-blue-600 dark:text-blue-400 mr-2"></i>
                                    <div>
                                        <p class="text-sm font-semibold text-blue-800 dark:text-blue-300">DEMO - Supervisor de Ruta</p>
                                        <p class="text-xs text-blue-600 dark:text-blue-400">CDMX ‚Üî Guadalajara</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- View Toggle Tabs -->
                    <div class="border-b border-gray-200 dark:border-gray-700 mb-6">
                        <nav class="-mb-px flex space-x-8">
                            <button id="supervisor-tab" class="maintenance-tab-button active py-2 px-1 border-b-2 font-medium text-sm border-blue-500 text-blue-600 dark:text-blue-400">
                                <i class="fas fa-user-tie mr-2"></i>Recepci√≥n Supervisor
                            </button>
                            <button id="units-status-tab" class="maintenance-tab-button py-2 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">
                                <i class="fas fa-cogs mr-2"></i>Estado de Unidades
                            </button>
                        </nav>
                    </div>

                    <!-- Supervisor Reception View -->
                    <div id="supervisor-view" class="view-content">
                        <!-- Key Metrics -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-red-100 dark:bg-red-900/30">
                                        <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Alertas Cr√≠ticas</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">7</p>
                                        <p class="text-xs text-red-600 dark:text-red-400">Atenci√≥n inmediata</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/30">
                                        <i class="fas fa-clock text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Mantenimiento Pendiente</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">23</p>
                                        <p class="text-xs text-yellow-600 dark:text-yellow-400">Esta semana</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900/30">
                                        <i class="fas fa-wrench text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">√ìrdenes Activas</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">15</p>
                                        <p class="text-xs text-blue-600 dark:text-blue-400">En progreso</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/30">
                                        <i class="fas fa-chart-line text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Tasa de Eficiencia</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">94.2%</p>
                                        <p class="text-xs text-green-600 dark:text-green-400">+2.1% este mes</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Priority Queue and Technician Status -->
                        <div class="grid grid-cols-1 xl:grid-cols-3 gap-6 mb-6">
                            <!-- Priority Maintenance Queue -->
                            <div class="xl:col-span-2 bg-white dark:bg-gray-800 rounded-lg shadow">
                                <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                    <div class="flex justify-between items-center">
                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Cola de Mantenimiento - Ruta CDMX ‚Üî Guadalajara</h3>
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                            <i class="fas fa-plus mr-2"></i>Nueva Orden
                                        </button>
                                    </div>
                                    <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">1,287 unidades en ruta ‚Ä¢ 23 alertas activas</p>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-4">
                                        <!-- Critical Priority -->
                                        <div class="border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-4 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div class="flex-1">
                                                    <div class="flex items-center mb-2">
                                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300 mr-2">CR√çTICO</span>
                                                        <span class="text-sm font-medium text-gray-900 dark:text-white">ADO-1156 - Sistema de Frenos</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Ubicaci√≥n: km 89 CDMX-Guadalajara | T√©cnico: Roberto Silva</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Detectado hace 12 minutos - Puede afectar itinerario</p>
                                                </div>
                                                <div class="ml-4 flex space-x-2">
                                                    <button class="schedule-maintenance px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm" data-unit="ADO-1156" data-issue="Sistema de frenos - Falla cr√≠tica" data-location="km 89 CDMX-Guadalajara">
                                                        <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                    </button>
                                                    <button class="px-3 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 text-sm">
                                                        Asignar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- High Priority -->
                                        <div class="border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-900/20 p-4 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div class="flex-1">
                                                    <div class="flex items-center mb-2">
                                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300 mr-2">ALTA</span>
                                                        <span class="text-sm font-medium text-gray-900 dark:text-white">ADO-1045 - Mantenimiento Motor</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Terminal: Guadalajara | T√©cnico: Carlos Rodriguez</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Mantenimiento programado - Ventana de 3 horas</p>
                                                </div>
                                                <div class="ml-4 flex space-x-2">
                                                    <button class="schedule-maintenance px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm" data-unit="ADO-1045" data-issue="Mantenimiento Motor - Alta prioridad" data-location="Terminal Guadalajara">
                                                        <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                    </button>
                                                    <button class="px-3 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 text-sm">
                                                        Asignar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Medium Priority -->
                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div class="flex-1">
                                                    <div class="flex items-center mb-2">
                                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300 mr-2">MEDIA</span>
                                                        <span class="text-sm font-medium text-gray-900 dark:text-white">ADO-1203 - Revisi√≥n Neum√°ticos</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Terminal: CDMX | T√©cnico: Ana Morales</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Mantenimiento preventivo - Pr√≥ximo turno nocturno</p>
                                                </div>
                                                <div class="ml-4 flex space-x-2">
                                                    <button class="schedule-maintenance px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm" data-unit="ADO-1203" data-issue="Revisi√≥n Neum√°ticos - Media prioridad" data-location="Terminal CDMX">
                                                        <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                    </button>
                                                    <button class="px-3 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm">
                                                        Planificar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Additional Route-Specific Item -->
                                        <div class="border-l-4 border-blue-500 bg-blue-50 dark:bg-blue-900/20 p-4 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div class="flex-1">
                                                    <div class="flex items-center mb-2">
                                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300 mr-2">RUTINA</span>
                                                        <span class="text-sm font-medium text-gray-900 dark:text-white">ADO-1078 - Inspecci√≥n Programada</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Terminal: Guadalajara | Inspector: Miguel Torres</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Inspecci√≥n semanal de seguridad - Sin demoras</p>
                                                </div>
                                                <div class="ml-4 flex space-x-2">
                                                    <button class="schedule-maintenance px-3 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm" data-unit="ADO-1078" data-issue="Inspecci√≥n Programada - Rutina" data-location="Terminal Guadalajara">
                                                        <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                    </button>
                                                    <button class="px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                                        Confirmar
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Technician Availability -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
                                <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Estado de T√©cnicos</h3>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-4">
                                        <div class="flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Roberto Silva</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Sistemas El√©ctricos</p>
                                                </div>
                                            </div>
                                            <span class="text-xs text-green-600 dark:text-green-400 font-medium">Disponible</span>
                                        </div>

                                        <div class="flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-blue-500 rounded-full mr-3"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Elena Vasquez</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Sistemas Mec√°nicos</p>
                                                </div>
                                            </div>
                                            <span class="text-xs text-blue-600 dark:text-blue-400 font-medium">Ocupado</span>
                                        </div>

                                        <div class="flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-3"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Carlos Mendoza</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Especialista Motor</p>
                                                </div>
                                            </div>
                                            <span class="text-xs text-yellow-600 dark:text-yellow-400 font-medium">Descanso</span>
                                        </div>

                                        <div class="flex items-center justify-between p-3 bg-red-50 dark:bg-red-900/20 rounded-lg">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-red-500 rounded-full mr-3"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">Miguel Torres</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">L√≠der de Equipo</p>
                                                </div>
                                            </div>
                                            <span class="text-xs text-red-600 dark:text-red-400 font-medium">Emergencia</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- AI Insights -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white flex items-center">
                                    <i class="fas fa-brain text-purple-600 dark:text-purple-400 mr-2"></i>
                                    Insights de IA Predictiva
                                </h3>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div class="bg-gradient-to-r from-purple-50 to-pink-50 dark:from-purple-900/20 dark:to-pink-900/20 rounded-lg p-4">
                                        <div class="flex items-center mb-3">
                                            <div class="p-2 bg-purple-100 dark:bg-purple-900/50 rounded-lg mr-3">
                                                <i class="fas fa-exclamation-triangle text-purple-600 dark:text-purple-400"></i>
                                            </div>
                                            <h4 class="font-semibold text-gray-900 dark:text-white">Predicci√≥n de Fallas</h4>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">ADO-089 mostrando se√±ales tempranas de alerta</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Falla estimada en 72 horas</p>
                                        <div class="mt-3">
                                            <button class="text-purple-600 dark:text-purple-400 text-sm font-medium hover:underline">Programar Mantenimiento</button>
                                        </div>
                                    </div>

                                    <div class="bg-gradient-to-r from-blue-50 to-cyan-50 dark:from-blue-900/20 dark:to-cyan-900/20 rounded-lg p-4">
                                        <div class="flex items-center mb-3">
                                            <div class="p-2 bg-blue-100 dark:bg-blue-900/50 rounded-lg mr-3">
                                                <i class="fas fa-chart-bar text-blue-600 dark:text-blue-400"></i>
                                            </div>
                                            <h4 class="font-semibold text-gray-900 dark:text-white">Optimizaci√≥n de Rendimiento</h4>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">Eficiencia de flota puede mejorar 8%</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Ventana recomendada: Turno nocturno</p>
                                        <div class="mt-3">
                                            <button class="text-blue-600 dark:text-blue-400 text-sm font-medium hover:underline">Ver Plan de Optimizaci√≥n</button>
                                        </div>
                                    </div>

                                    <div class="bg-gradient-to-r from-green-50 to-emerald-50 dark:from-green-900/20 dark:to-emerald-900/20 rounded-lg p-4">
                                        <div class="flex items-center mb-3">
                                            <div class="p-2 bg-green-100 dark:bg-green-900/50 rounded-lg mr-3">
                                                <i class="fas fa-leaf text-green-600 dark:text-green-400"></i>
                                            </div>
                                            <h4 class="font-semibold text-gray-900 dark:text-white">Eficiencia Energ√©tica</h4>
                                        </div>
                                        <p class="text-sm text-gray-700 dark:text-gray-300 mb-2">Consumo de combustible 15% sobre √≥ptimo</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Ahorro potencial: $240,000 MXN/mes</p>
                                        <div class="mt-3">
                                            <button class="text-green-600 dark:text-green-400 text-sm font-medium hover:underline">Implementar Cambios</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Units Status View -->
                    <div id="units-status-view" class="view-content hidden">
                        <!-- Equipment Status Overview -->
                        <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/30">
                                        <i class="fas fa-check-circle text-green-600 dark:text-green-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Operativos</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">1,247</p>
                                        <p class="text-xs text-green-600 dark:text-green-400">94.4% disponibilidad</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/30">
                                        <i class="fas fa-tools text-yellow-600 dark:text-yellow-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">En Mantenimiento</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">89</p>
                                        <p class="text-xs text-yellow-600 dark:text-yellow-400">Trabajo programado</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-red-100 dark:bg-red-900/30">
                                        <i class="fas fa-times-circle text-red-600 dark:text-red-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Fuera de Servicio</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">12</p>
                                        <p class="text-xs text-red-600 dark:text-red-400">Problemas cr√≠ticos</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center">
                                    <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900/30">
                                        <i class="fas fa-sync-alt text-blue-600 dark:text-blue-400"></i>
                                    </div>
                                    <div class="ml-4">
                                        <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Flota</p>
                                        <p class="text-2xl font-semibold text-gray-900 dark:text-white">1,348</p>
                                        <p class="text-xs text-blue-600 dark:text-blue-400">Monitoreado 24/7</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Fleet Monitoring Dashboard -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <div class="flex justify-between items-center">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Monitoreo de Estado de Flota</h3>
                                    <div class="flex space-x-2">
                                        <select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-sm">
                                            <option>Todas las Rutas</option>
                                            <option>CDMX-Guadalajara</option>
                                            <option>Monterrey-Canc√∫n</option>
                                            <option>CDMX-Monterrey</option>
                                            <option>Guadalajara-Canc√∫n</option>
                                        </select>
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                            <i class="fas fa-download mr-2"></i>Exportar Reporte
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="overflow-x-auto">
                                    <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                        <thead class="bg-gray-50 dark:bg-gray-700">
                                            <tr>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Unidad ID</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Modelo</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estado</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Rendimiento</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Salud General</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Pr√≥ximo Mantenimiento</th>
                                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Acci√≥n</th>
                                            </tr>
                                        </thead>
                                        <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">ADO-156</td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Volvo 9700</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                        <i class="fas fa-exclamation-triangle mr-1"></i>Cr√≠tico
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                        <div class="bg-red-500 h-2 rounded-full" style="width: 45%"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">45%</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="text-lg font-semibold text-red-600 dark:text-red-400">32</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">/100</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Inmediato</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">
                                                        Emergencia
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">ADO-045</td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Mercedes O500</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                        <i class="fas fa-exclamation mr-1"></i>Advertencia
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                        <div class="bg-yellow-500 h-2 rounded-full" style="width: 78%"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">78%</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="text-lg font-semibold text-yellow-600 dark:text-yellow-400">71</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">/100</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">5 d√≠as</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                        Programar
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">ADO-001</td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Scania Touring</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                        <i class="fas fa-check mr-1"></i>√ìptimo
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                        <div class="bg-green-500 h-2 rounded-full" style="width: 96%"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">96%</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="text-lg font-semibold text-green-600 dark:text-green-400">94</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">/100</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">14 d√≠as</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <button class="px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">
                                                        Monitorear
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">ADO-203</td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Volvo 9700 DD</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                        <i class="fas fa-clock mr-1"></i>Programado
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                        <div class="bg-blue-500 h-2 rounded-full" style="width: 85%"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">85%</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="text-lg font-semibold text-blue-600 dark:text-blue-400">83</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">/100</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Ma√±ana 08:00</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <button class="px-3 py-1 bg-blue-600 text-white rounded text-xs hover:bg-blue-700">
                                                        Confirmar
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr class="hover:bg-gray-50 dark:hover:bg-gray-700">
                                                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white">ADO-089</td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Irizar i6</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                        <i class="fas fa-check mr-1"></i>√ìptimo
                                                    </span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2">
                                                        <div class="bg-green-500 h-2 rounded-full" style="width: 91%"></div>
                                                    </div>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">91%</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <span class="text-lg font-semibold text-green-600 dark:text-green-400">88</span>
                                                    <span class="text-xs text-gray-500 dark:text-gray-400">/100</span>
                                                </td>
                                                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">21 d√≠as</td>
                                                <td class="px-6 py-4 whitespace-nowrap">
                                                    <button class="px-3 py-1 bg-green-600 text-white rounded text-xs hover:bg-green-700">
                                                        Monitorear
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Fleet Management Tab Content -->
                <div id="content-fleet" class="tab-content p-6">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Gesti√≥n de Flota</h1>
                        <p class="text-gray-600 dark:text-gray-400">Sistema integral de gesti√≥n y monitoreo de activos vehiculares</p>
                    </div>

                    <!-- Fleet Overview Cards -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 dark:bg-blue-900/30">
                                    <i class="fas fa-bus text-blue-600 dark:text-blue-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Total Unidades</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">1,348</p>
                                    <p class="text-xs text-blue-600 dark:text-blue-400">Activo en flota</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/30">
                                    <i class="fas fa-route text-green-600 dark:text-green-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Rutas Activas</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">47</p>
                                    <p class="text-xs text-green-600 dark:text-green-400">Operando 24/7</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-100 dark:bg-purple-900/30">
                                    <i class="fas fa-calendar-alt text-purple-600 dark:text-purple-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Edad Promedio</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">4.2</p>
                                    <p class="text-xs text-purple-600 dark:text-purple-400">a√±os</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-orange-100 dark:bg-orange-900/30">
                                    <i class="fas fa-gas-pump text-orange-600 dark:text-orange-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Eficiencia Promedio</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">8.7</p>
                                    <p class="text-xs text-orange-600 dark:text-orange-400">km/L</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filters Section -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow mb-6">
                        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">B√∫squeda y Filtros de Activos</h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Placas</label>
                                    <input type="text" id="filter-plates" class="fleet-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base" placeholder="Ej: 123-ABC">
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Modelo</label>
                                    <select id="filter-model" class="fleet-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200">
                                        <option value="">Todos los Modelos</option>
                                        <option value="Volvo 9700">Volvo 9700</option>
                                        <option value="Mercedes O500">Mercedes O500</option>
                                        <option value="Scania Touring">Scania Touring</option>
                                        <option value="Irizar i6">Irizar i6</option>
                                        <option value="Marcopolo G7">Marcopolo G7</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Nombre Unidad</label>
                                    <input type="text" id="filter-name" class="fleet-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base" placeholder="Ej: ADO-001">
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Ruta</label>
                                    <select id="filter-route" class="fleet-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200">
                                        <option value="">Todas las Rutas</option>
                                        <option value="CDMX-Guadalajara">CDMX-Guadalajara</option>
                                        <option value="Monterrey-Canc√∫n">Monterrey-Canc√∫n</option>
                                        <option value="CDMX-Monterrey">CDMX-Monterrey</option>
                                        <option value="Guadalajara-Canc√∫n">Guadalajara-Canc√∫n</option>
                                        <option value="CDMX-Oaxaca">CDMX-Oaxaca</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">VIN</label>
                                    <input type="text" id="filter-vin" class="fleet-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base" placeholder="√öltimos 6 d√≠gitos">
                                </div>
                                <div class="flex items-end space-x-2">
                                    <button id="clear-filters" class="flex-1 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        <i class="fas fa-times mr-2"></i>Limpiar
                                    </button>
                                    <button id="export-fleet" class="flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                                        <i class="fas fa-download mr-2"></i>Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Fleet Asset Table -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow mb-6">
                        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Registro de Activos Vehiculares</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-600 dark:text-gray-400">Mostrando <span id="showing-count">15</span> de <span id="total-count">1,348</span> unidades</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table id="fleet-table" class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Foto</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Unidad</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Placas</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Modelo</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">VIN</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Ruta Asignada</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Estado</th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Row 1 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 fleet-row" data-unit="ADO-001">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="w-16 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img src="https://pfst.cf2.poecdn.net/base/image/c7a21c585314deaa4da0811346f6d48935bba14dd78e314c79a3a0d4258efc41?w=278&amp;h=181" alt="ADO-001" class="w-full h-full object-cover">
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-001</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">A√±o: 2020</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">123-ABC</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Scania Touring</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">YS3R4X2...789123</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Guadalajara</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                    <i class="fas fa-check-circle mr-1"></i>Operativo
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-details text-blue-600 dark:text-blue-400 hover:underline mr-3" data-unit="ADO-001">
                                                    <i class="fas fa-eye mr-1"></i>Ver Detalles
                                                </button>
                                                <button class="view-inspection text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-001">
                                                    <i class="fas fa-clipboard-check mr-1"></i>Inspecci√≥n
                                                </button>
                                                <button class="view-history text-green-600 dark:text-green-400 hover:underline" data-unit="ADO-001">
                                                    <i class="fas fa-history mr-1"></i>Historial
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 2 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 fleet-row" data-unit="ADO-045">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="w-16 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img src="https://pfst.cf2.poecdn.net/base/image/a1f4f3c928646945c8b7272bfe16291695fb19d81628e2a8ef6cb498e12e8d2c?w=300&amp;h=168" alt="ADO-045" class="w-full h-full object-cover">
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-045</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">A√±o: 2019</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">456-DEF</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Mercedes O500</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">WDB9062...456789</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Monterrey-Canc√∫n</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                    <i class="fas fa-exclamation-triangle mr-1"></i>Mantenimiento
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-details text-blue-600 dark:text-blue-400 hover:underline mr-3" data-unit="ADO-045">
                                                    <i class="fas fa-eye mr-1"></i>Ver Detalles
                                                </button>
                                                <button class="view-inspection text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-045">
                                                    <i class="fas fa-clipboard-check mr-1"></i>Inspecci√≥n
                                                </button>
                                                <button class="view-history text-green-600 dark:text-green-400 hover:underline" data-unit="ADO-045">
                                                    <i class="fas fa-history mr-1"></i>Historial
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 3 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 fleet-row" data-unit="ADO-089">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="w-16 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img src="https://pfst.cf2.poecdn.net/base/image/ab61f4d63d4a8890ef8f776488eaf7aa2d345baf483dda9753d62553fa3f68c0?w=275&amp;h=183" alt="ADO-089" class="w-full h-full object-cover">
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-089</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">A√±o: 2021</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">789-GHI</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Irizar i6</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">VF7LC9HZ...789456</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Monterrey</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                    <i class="fas fa-check-circle mr-1"></i>Operativo
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-details text-blue-600 dark:text-blue-400 hover:underline mr-3" data-unit="ADO-089">
                                                    <i class="fas fa-eye mr-1"></i>Ver Detalles
                                                </button>
                                                <button class="view-inspection text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-089">
                                                    <i class="fas fa-clipboard-check mr-1"></i>Inspecci√≥n
                                                </button>
                                                <button class="view-history text-green-600 dark:text-green-400 hover:underline" data-unit="ADO-089">
                                                    <i class="fas fa-history mr-1"></i>Historial
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 4 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 fleet-row" data-unit="ADO-156">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="w-16 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img src="https://pfst.cf2.poecdn.net/base/image/173e3e0ac7373834fbea92dc9c1d8fb282528068d6393ff91ca41e360c1d2649?w=300&amp;h=168" alt="ADO-156" class="w-full h-full object-cover">
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-156</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">A√±o: 2018</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">321-JKL</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Volvo 9700</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">4V4NC9EH...123654</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Guadalajara-Canc√∫n</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-times-circle mr-1"></i>Fuera de Servicio
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-details text-blue-600 dark:text-blue-400 hover:underline mr-3" data-unit="ADO-156">
                                                    <i class="fas fa-eye mr-1"></i>Ver Detalles
                                                </button>
                                                <button class="view-inspection text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-156">
                                                    <i class="fas fa-clipboard-check mr-1"></i>Inspecci√≥n
                                                </button>
                                                <button class="view-history text-green-600 dark:text-green-400 hover:underline" data-unit="ADO-156">
                                                    <i class="fas fa-history mr-1"></i>Historial
                                                </button>
                                            </td>
                                        </tr>
                                        
                                        <!-- Row 5 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 fleet-row" data-unit="ADO-203">
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="w-16 h-12 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img src="https://pfst.cf2.poecdn.net/base/image/c7a21c585314deaa4da0811346f6d48935bba14dd78e314c79a3a0d4258efc41?w=278&amp;h=181" alt="ADO-203" class="w-full h-full object-cover">
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-203</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">A√±o: 2022</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">654-MNO</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Marcopolo G7</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">9BM3T85F...987321</td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Oaxaca</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                    <i class="fas fa-check-circle mr-1"></i>Operativo
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-details text-blue-600 dark:text-blue-400 hover:underline mr-3" data-unit="ADO-203">
                                                    <i class="fas fa-eye mr-1"></i>Ver Detalles
                                                </button>
                                                <button class="view-inspection text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-203">
                                                    <i class="fas fa-clipboard-check mr-1"></i>Inspecci√≥n
                                                </button>
                                                <button class="view-history text-green-600 dark:text-green-400 hover:underline" data-unit="ADO-203">
                                                    <i class="fas fa-history mr-1"></i>Historial
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Pagination -->
                            <div class="flex items-center justify-between mt-4">
                                <div class="flex items-center space-x-2">
                                    <button class="px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        <i class="fas fa-chevron-left mr-1"></i>Anterior
                                    </button>
                                    <span class="px-3 py-2 text-sm bg-blue-600 text-white rounded-md">1</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">2</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">3</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">...</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">90</span>
                                    <button class="px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        Siguiente<i class="fas fa-chevron-right ml-1"></i>
                                    </button>
                                </div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">
                                    P√°gina 1 de 90
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Unit Details Modal (Hidden by default) -->
                    <div id="unit-details-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="modal-title">Detalles de Unidad</h3>
                                    <button id="close-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                                    <!-- Unit Photo Section -->
                                    <div class="lg:col-span-1">
                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-4">Fotograf√≠as de la Unidad</h4>
                                        <div class="space-y-4">
                                            <div class="aspect-w-16 aspect-h-9 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                <img id="detail-main-photo" src="" alt="Foto Principal" class="w-full h-full object-cover">
                                            </div>
                                            <div class="grid grid-cols-2 gap-2">
                                                <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-md overflow-hidden">
                                                    <img id="detail-interior-photo" src="" alt="Interior" class="w-full h-full object-cover">
                                                </div>
                                                <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-md flex items-center justify-center">
                                                    <div class="text-center">
                                                        <i class="fas fa-camera text-gray-400 text-lg mb-1"></i>
                                                        <p class="text-xs text-gray-500 dark:text-gray-400">Motor</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Unit Details Section -->
                                    <div class="lg:col-span-2">
                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-4">Informaci√≥n T√©cnica</h4>
                                        <div class="grid grid-cols-2 gap-4 mb-6">
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Unidad ID</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-unit-id">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Placas</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-plates">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Modelo</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-model">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">A√±o</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-year">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">VIN Completo</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-vin">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Ruta Asignada</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-route">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Kilometraje</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="detail-mileage">-</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Estado Actual</label>
                                                <p class="text-sm" id="detail-status">-</p>
                                            </div>
                                        </div>
                                        
                                        <!-- Quick Stats -->
                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-4">Estad√≠sticas R√°pidas</h4>
                                        <div class="grid grid-cols-3 gap-4">
                                            <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                <p class="text-2xl font-bold text-blue-600 dark:text-blue-400" id="detail-efficiency">8.7</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">km/L Promedio</p>
                                            </div>
                                            <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                <p class="text-2xl font-bold text-green-600 dark:text-green-400" id="detail-uptime">94.2</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">% Disponibilidad</p>
                                            </div>
                                            <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                <p class="text-2xl font-bold text-purple-600 dark:text-purple-400" id="detail-trips">847</p>
                                                <p class="text-xs text-gray-600 dark:text-gray-400">Viajes Este Mes</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Maintenance History Modal (Hidden by default) -->
                    <div id="history-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="history-modal-title">Historial de Mantenimiento</h3>
                                    <button id="close-history-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <!-- Main Content Grid -->
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                                    <!-- Left Column: Timeline (2/3 width) -->
                                    <div class="lg:col-span-2">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Cronolog√≠a de Mantenimiento</h4>
                                        <!-- Timeline -->
                                        <div class="relative">
                                            <div class="absolute left-8 top-0 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"></div>
                                    
                                    <!-- Timeline Items -->
                                    <div class="space-y-6" id="maintenance-timeline">
                                        <!-- Timeline item 1 -->
                                        <div class="relative flex items-start">
                                            <div class="absolute left-6 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                                            <div class="ml-16">
                                                <div class="bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-green-500">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white">Mantenimiento Preventivo Completado</h4>
                                                        <span class="text-sm text-gray-500 dark:text-gray-400">15 Mar 2024</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Cambio de aceite, filtros y revisi√≥n general de motor</p>
                                                    <div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">
                                                        <span><i class="fas fa-user mr-1"></i>T√©cnico: Carlos Rodriguez</span>
                                                        <span><i class="fas fa-clock mr-1"></i>4.5 horas</span>
                                                        <span><i class="fas fa-dollar-sign mr-1"></i>$12,500 MXN</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Timeline item 2 -->
                                        <div class="relative flex items-start">
                                            <div class="absolute left-6 w-4 h-4 bg-yellow-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                                            <div class="ml-16">
                                                <div class="bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-yellow-500">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white">Reparaci√≥n Sistema de Frenos</h4>
                                                        <span class="text-sm text-gray-500 dark:text-gray-400">02 Mar 2024</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Reemplazo de pastillas y discos de freno delanteros</p>
                                                    <div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">
                                                        <span><i class="fas fa-user mr-1"></i>T√©cnico: Elena Vasquez</span>
                                                        <span><i class="fas fa-clock mr-1"></i>6 horas</span>
                                                        <span><i class="fas fa-dollar-sign mr-1"></i>$18,700 MXN</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Timeline item 3 -->
                                        <div class="relative flex items-start">
                                            <div class="absolute left-6 w-4 h-4 bg-blue-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                                            <div class="ml-16">
                                                <div class="bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-blue-500">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white">Inspecci√≥n Programada</h4>
                                                        <span class="text-sm text-gray-500 dark:text-gray-400">20 Feb 2024</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Inspecci√≥n semestral de seguridad y emisiones</p>
                                                    <div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">
                                                        <span><i class="fas fa-user mr-1"></i>Inspector: Miguel Torres</span>
                                                        <span><i class="fas fa-clock mr-1"></i>2 horas</span>
                                                        <span><i class="fas fa-dollar-sign mr-1"></i>$3,200 MXN</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Timeline item 4 -->
                                        <div class="relative flex items-start">
                                            <div class="absolute left-6 w-4 h-4 bg-red-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                                            <div class="ml-16">
                                                <div class="bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-red-500">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white">Reparaci√≥n de Emergencia</h4>
                                                        <span class="text-sm text-gray-500 dark:text-gray-400">08 Feb 2024</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Falla en sistema el√©ctrico - Reemplazo de alternador</p>
                                                    <div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">
                                                        <span><i class="fas fa-user mr-1"></i>T√©cnico: Roberto Silva</span>
                                                        <span><i class="fas fa-clock mr-1"></i>8 horas</span>
                                                        <span><i class="fas fa-dollar-sign mr-1"></i>$24,500 MXN</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Timeline item 5 -->
                                        <div class="relative flex items-start">
                                            <div class="absolute left-6 w-4 h-4 bg-green-500 rounded-full border-2 border-white dark:border-gray-800"></div>
                                            <div class="ml-16">
                                                <div class="bg-white dark:bg-gray-700 rounded-lg shadow p-4 border-l-4 border-green-500">
                                                    <div class="flex items-center justify-between mb-2">
                                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white">Mantenimiento Rutinario</h4>
                                                        <span class="text-sm text-gray-500 dark:text-gray-400">25 Ene 2024</span>
                                                    </div>
                                                    <p class="text-sm text-gray-600 dark:text-gray-300 mb-2">Rotaci√≥n de neum√°ticos y ajuste de presi√≥n</p>
                                                    <div class="flex items-center space-x-4 text-xs text-gray-500 dark:text-gray-400">
                                                        <span><i class="fas fa-user mr-1"></i>T√©cnico: Ana Morales</span>
                                                        <span><i class="fas fa-clock mr-1"></i>1.5 horas</span>
                                                        <span><i class="fas fa-dollar-sign mr-1"></i>$1,800 MXN</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                        </div>
                                    
                                    <!-- Right Column: Unit Details -->
                                    <div class="lg:col-span-1">
                                        <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-6">Informaci√≥n de la Unidad</h4>
                                        
                                        <!-- Unit Photos -->
                                        <div class="mb-6">
                                            <h5 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Fotograf√≠as</h5>
                                            <div class="space-y-3">
                                                <div class="aspect-w-16 aspect-h-9 bg-gray-200 dark:bg-gray-600 rounded-lg overflow-hidden">
                                                    <img id="history-main-photo" src="https://pfst.cf2.poecdn.net/base/image/c7a21c585314deaa4da0811346f6d48935bba14dd78e314c79a3a0d4258efc41?w=278&amp;h=181" alt="Foto exterior" class="w-full h-full object-cover">
                                                </div>
                                                <div class="grid grid-cols-2 gap-2">
                                                    <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-md overflow-hidden">
                                                        <img id="history-interior-photo" src="https://pfst.cf2.poecdn.net/base/image/58c16f47f26c402814995fb5a5c523b5ed579ee3d37140dadcb0fccdc537979b?w=491&amp;h=320" alt="Interior" class="w-full h-full object-cover">
                                                    </div>
                                                    <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-md flex items-center justify-center">
                                                        <div class="text-center">
                                                            <i class="fas fa-camera text-gray-400 text-lg mb-1"></i>
                                                            <p class="text-xs text-gray-500 dark:text-gray-400">Motor</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Unit Specifications -->
                                        <div class="mb-6">
                                            <h5 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Especificaciones T√©cnicas</h5>
                                            <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4 space-y-3">
                                                <div class="grid grid-cols-2 gap-4 text-sm">
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">Unidad ID:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white ml-2" id="history-unit-id">ADO-001</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">Modelo:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white ml-2" id="history-model">Scania Touring</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">A√±o:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white ml-2" id="history-year">2020</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">VIN:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white ml-2" id="history-vin">YS3R4X2...789123</span>
                                                    </div>
                                                    <div class="col-span-2">
                                                        <span class="text-gray-600 dark:text-gray-400">Ruta Asignada:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white ml-2" id="history-route">CDMX-Guadalajara</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Current Status -->
                                        <div class="mb-6">
                                            <h5 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Estado Actual</h5>
                                            <div class="space-y-3">
                                                <div class="flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg">
                                                    <div class="flex items-center">
                                                        <div class="w-3 h-3 bg-green-500 rounded-full mr-3"></div>
                                                        <span class="text-sm font-medium text-gray-900 dark:text-white">Estado:</span>
                                                    </div>
                                                    <span class="text-sm text-green-600 dark:text-green-400 font-medium" id="history-status">Operativo</span>
                                                </div>
                                                
                                                <div class="grid grid-cols-2 gap-3">
                                                    <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                        <p class="text-lg font-bold text-blue-600 dark:text-blue-400" id="history-mileage">287,450</p>
                                                        <p class="text-xs text-gray-600 dark:text-gray-400">Kilometraje</p>
                                                    </div>
                                                    <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                        <p class="text-lg font-bold text-green-600 dark:text-green-400" id="history-uptime">96.8%</p>
                                                        <p class="text-xs text-gray-600 dark:text-gray-400">Disponibilidad</p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Maintenance Summary -->
                                        <div class="mb-6">
                                            <h5 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Resumen de Mantenimiento</h5>
                                            <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg p-4">
                                                <div class="grid grid-cols-2 gap-3 text-sm">
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">√öltimo Servicio:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white block">15 Mar 2024</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">Pr√≥ximo Servicio:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white block">15 Jun 2024</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">Total Gastos:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white block">$186,400 MXN</span>
                                                    </div>
                                                    <div>
                                                        <span class="text-gray-600 dark:text-gray-400">Tiempo Total:</span>
                                                        <span class="font-medium text-gray-900 dark:text-white block">156 horas</span>
                                                    </div>
                                                </div>
                                                
                                                <div class="mt-3 pt-3 border-t border-blue-200 dark:border-blue-700">
                                                    <div class="flex items-center justify-between text-sm">
                                                        <span class="text-gray-600 dark:text-gray-400">Eficiencia Preventiva:</span>
                                                        <div class="flex items-center">
                                                            <div class="w-16 bg-gray-200 dark:bg-gray-700 rounded-full h-2 mr-2">
                                                                <div class="bg-green-500 h-2 rounded-full" style="width: 92%"></div>
                                                            </div>
                                                            <span class="font-medium text-green-600 dark:text-green-400">92%</span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        
                                        <!-- Quick Action Buttons -->
                                        <div>
                                            <h5 class="text-md font-semibold text-gray-900 dark:text-white mb-3">Acciones R√°pidas</h5>
                                            <div class="space-y-2">
                                                <button class="w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center justify-center">
                                                    <i class="fas fa-calendar-plus mr-2"></i>Programar Mantenimiento
                                                </button>
                                                <button class="w-full px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm flex items-center justify-center">
                                                    <i class="fas fa-clipboard-check mr-2"></i>Nueva Inspecci√≥n
                                                </button>
                                                <button class="w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm flex items-center justify-center">
                                                    <i class="fas fa-download mr-2"></i>Exportar Historial
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Summary Stats (moved to bottom as a full-width section) -->
                                <div class="mt-8 grid grid-cols-1 md:grid-cols-4 gap-4">
                                    <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-2xl font-bold text-blue-600 dark:text-blue-400">23</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Mantenimientos Totales</p>
                                    </div>
                                    <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-2xl font-bold text-green-600 dark:text-green-400">$186,400</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Costo Total MXN</p>
                                    </div>
                                    <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-2xl font-bold text-purple-600 dark:text-purple-400">156</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">Horas Totales</p>
                                    </div>
                                    <div class="text-center p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                        <p class="text-2xl font-bold text-orange-600 dark:text-orange-400">92%</p>
                                        <p class="text-xs text-gray-600 dark:text-gray-400">√âxito Preventivo</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Vehicle Inspection Checklist Modal (Hidden by default) -->
                    <div id="inspection-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="inspection-modal-title">Lista de Verificaci√≥n de Inspecci√≥n Vehicular</h3>
                                        <p class="text-sm text-gray-600 dark:text-gray-400" id="inspection-unit-info">ADO-001 | Mercedes O500 | Placas: 123-ABC</p>
                                    </div>
                                    <button id="close-inspection-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <!-- Inspection Header Info -->
                                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                    <div>
                                        <label class="text-xs font-medium text-gray-600 dark:text-gray-400">Fecha de Inspecci√≥n</label>
                                        <p class="text-sm text-gray-900 dark:text-white">15 Mar 2024</p>
                                    </div>
                                    <div>
                                        <label class="text-xs font-medium text-gray-600 dark:text-gray-400">Inspector</label>
                                        <p class="text-sm text-gray-900 dark:text-white">Carlos Rodriguez</p>
                                    </div>
                                    <div>
                                        <label class="text-xs font-medium text-gray-600 dark:text-gray-400">Kilometraje</label>
                                        <p class="text-sm text-gray-900 dark:text-white">287,450 km</p>
                                    </div>
                                    <div>
                                        <label class="text-xs font-medium text-gray-600 dark:text-gray-400">Estado General</label>
                                        <span class="inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                            <i class="fas fa-check-circle mr-1"></i>Aprobado
                                        </span>
                                    </div>
                                </div>

                                <!-- Inspection Categories -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- Left Column: Checklist Items -->
                                    <div class="space-y-6">
                                        <!-- Exterior Inspection -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-car text-blue-600 dark:text-blue-400 mr-2"></i>
                                                    Inspecci√≥n Exterior
                                                </h4>
                                            </div>
                                            <div class="p-4 space-y-3">
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Carrocer√≠a y pintura</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Parabrisas y ventanas</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Espejos retrovisores</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Placas de identificaci√≥n</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Luces exteriores</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-yellow-600 dark:text-yellow-400"><i class="fas fa-exclamation-triangle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">Observaci√≥n</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Engine & Mechanical -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-cog text-orange-600 dark:text-orange-400 mr-2"></i>
                                                    Motor y Sistemas Mec√°nicos
                                                </h4>
                                            </div>
                                            <div class="p-4 space-y-3">
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Nivel de aceite de motor</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Nivel de refrigerante</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Filtros de aire</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Correas y mangueras</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Bater√≠a y conexiones</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Brakes & Safety -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-shield-alt text-red-600 dark:text-red-400 mr-2"></i>
                                                    Frenos y Seguridad
                                                </h4>
                                            </div>
                                            <div class="p-4 space-y-3">
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Pastillas de freno</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Discos de freno</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">L√≠quido de frenos</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Freno de emergencia</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Cinturones de seguridad</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Tires & Suspension -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-tire text-gray-600 dark:text-gray-400 mr-2"></i>
                                                    Neum√°ticos y Suspensi√≥n
                                                </h4>
                                            </div>
                                            <div class="p-4 space-y-3">
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Presi√≥n de neum√°ticos</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Desgaste de banda de rodamiento</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Alineaci√≥n y balanceo</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Amortiguadores</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Neum√°tico de repuesto</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Interior Inspection -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-chair text-purple-600 dark:text-purple-400 mr-2"></i>
                                                    Inspecci√≥n Interior
                                                </h4>
                                            </div>
                                            <div class="p-4 space-y-3">
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Asientos de pasajeros</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Aire acondicionado</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Sistema de audio</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Limpieza general</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                                <div class="flex items-center justify-between py-2 border-b border-gray-100 dark:border-gray-600">
                                                    <span class="text-sm text-gray-700 dark:text-gray-300">Equipo de emergencia</span>
                                                    <div class="flex items-center space-x-2">
                                                        <span class="text-green-600 dark:text-green-400"><i class="fas fa-check-circle"></i></span>
                                                        <span class="text-xs text-gray-500 dark:text-gray-400">OK</span>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Right Column: Photo Evidence -->
                                    <div class="space-y-6">
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-camera text-green-600 dark:text-green-400 mr-2"></i>
                                                    Evidencia Fotogr√°fica
                                                </h4>
                                            </div>
                                            <div class="p-4">
                                                <!-- Engine Compartment -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Compartimento del Motor</h5>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-cog text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Motor General</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-oil-can text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Niveles de Fluidos</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Tire Inspection -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Inspecci√≥n de Neum√°ticos</h5>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-tire text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Delanteros</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-tire text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Traseros</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Brake System -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Sistema de Frenos</h5>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-dot-circle text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Discos</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-square text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Pastillas</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Interior Views -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Vista Interior</h5>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-chair text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Asientos</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-tachometer-alt text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Dashboard</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Exterior Views -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Vista Exterior</h5>
                                                    <div class="grid grid-cols-2 gap-3">
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-bus text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Frontal</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                        <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                            <div class="text-center">
                                                                <i class="fas fa-bus text-gray-400 text-2xl mb-2"></i>
                                                                <p class="text-xs text-gray-500 dark:text-gray-400">Lateral</p>
                                                                <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <!-- Issues Identified -->
                                                <div class="mb-6">
                                                    <h5 class="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Problemas Identificados</h5>
                                                    <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg">
                                                        <div class="flex items-start">
                                                            <i class="fas fa-exclamation-triangle text-yellow-600 dark:text-yellow-400 mt-0.5 mr-2"></i>
                                                            <div>
                                                                <p class="text-sm text-yellow-800 dark:text-yellow-300 font-medium">Luz direccional izquierda intermitente</p>
                                                                <p class="text-xs text-yellow-700 dark:text-yellow-400 mt-1">Requiere reemplazo de bombilla. Prioridad: Media</p>
                                                                <div class="mt-2">
                                                                    <div class="aspect-w-4 aspect-h-3 bg-gray-200 dark:bg-gray-600 rounded-lg flex items-center justify-center">
                                                                        <div class="text-center">
                                                                            <i class="fas fa-lightbulb text-gray-400 text-xl mb-1"></i>
                                                                            <p class="text-xs text-gray-500 dark:text-gray-400">Evidencia del problema</p>
                                                                            <p class="text-xs text-gray-400 dark:text-gray-500">(Pr√≥ximamente)</p>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Inspector Signature -->
                                        <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                                <h4 class="font-semibold text-gray-900 dark:text-white flex items-center">
                                                    <i class="fas fa-signature text-blue-600 dark:text-blue-400 mr-2"></i>
                                                    Firma del Inspector
                                                </h4>
                                            </div>
                                            <div class="p-4">
                                                <div class="text-center py-8 bg-gray-50 dark:bg-gray-700 rounded-lg border-2 border-dashed border-gray-300 dark:border-gray-600">
                                                    <i class="fas fa-pen text-gray-400 text-3xl mb-2"></i>
                                                    <p class="text-sm text-gray-600 dark:text-gray-400">Firma Digital</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-500 mt-1">Carlos Rodriguez</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-500">15 Mar 2024, 14:32</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="flex justify-between items-center mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm text-gray-600 dark:text-gray-400">Estado de Inspecci√≥n:</span>
                                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                            <i class="fas fa-check-circle mr-2"></i>Aprobada
                                        </span>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button class="px-4 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 text-sm">
                                            <i class="fas fa-download mr-2"></i>Exportar PDF
                                        </button>
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                            <i class="fas fa-share mr-2"></i>Compartir Reporte
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Efficiency Management Tab Content -->
                <div id="content-efficiency" class="tab-content p-6">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Gesti√≥n de Eficiencia</h1>
                        <p class="text-gray-600 dark:text-gray-400">Monitoreo integral de rendimiento y eficiencia de la flota por rutas</p>
                    </div>

                    <!-- Main Content Grid -->
                    <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                        <!-- Left Sidebar - Fleet Units Search -->
                        <div class="lg:col-span-1 bg-white dark:bg-gray-800 rounded-lg shadow h-fit">
                            <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Activos de Flota</h3>
                                <!-- Search Field -->
                                <div class="relative mb-4">
                                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                                        <i class="fas fa-search text-gray-400 text-sm"></i>
                                    </div>
                                    <input type="text" id="unit-search" class="block w-full pl-10 pr-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base" placeholder="Buscar unidad...">
                                </div>
                                <!-- Status Filter -->
                                <div class="flex items-center space-x-2 text-xs mb-4">
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-green-500 rounded-full mr-1"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Operativo</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-yellow-500 rounded-full mr-1"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Mantenimiento</span>
                                    </div>
                                    <div class="flex items-center">
                                        <div class="w-2 h-2 bg-red-500 rounded-full mr-1"></div>
                                        <span class="text-gray-600 dark:text-gray-400">Cr√≠tico</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Fleet Units by Route - Scrollable Container -->
                            <div class="p-4 max-h-96 overflow-y-auto" style="scrollbar-width: thin;">
                                <!-- Priority Units Section (Critical & Maintenance) -->
                                <div class="mb-4">
                                    <h4 class="text-sm font-semibold text-red-600 dark:text-red-400 mb-2 flex items-center">
                                        <i class="fas fa-exclamation-triangle mr-2 animate-pulse"></i>
                                        Unidades Prioritarias
                                    </h4>
                                    <div class="space-y-2">
                                        <!-- Critical Unit ADO-156 -->
                                        <div class="unit-bounce flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded cursor-pointer hover:bg-red-100 dark:hover:bg-red-900/30 unit-item" data-unit="ADO-156">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-156</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700 ‚Ä¢ Guadalajara-Canc√∫n</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-red-600 dark:text-red-400 font-bold">32%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">CR√çTICO</p>
                                            </div>
                                        </div>

                                        <!-- Critical Unit ADO-892 -->
                                        <div class="unit-bounce flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded cursor-pointer hover:bg-red-100 dark:hover:bg-red-900/30 unit-item" data-unit="ADO-892">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-892</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500 ‚Ä¢ CDMX-Monterrey</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-red-600 dark:text-red-400 font-bold">28%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">CR√çTICO</p>
                                            </div>
                                        </div>

                                        <!-- Critical Unit ADO-573 -->
                                        <div class="unit-bounce flex items-center justify-between p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded cursor-pointer hover:bg-red-100 dark:hover:bg-red-900/30 unit-item" data-unit="ADO-573">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-red-500 rounded-full mr-2 animate-pulse"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-573</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6 ‚Ä¢ Monterrey-Canc√∫n</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-red-600 dark:text-red-400 font-bold">35%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">CR√çTICO</p>
                                            </div>
                                        </div>

                                        <!-- Maintenance Unit ADO-045 -->
                                        <div class="unit-bounce-mild flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/30 unit-item" data-unit="ADO-045">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-045</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500 ‚Ä¢ Monterrey-Canc√∫n</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-yellow-600 dark:text-yellow-400 font-bold">71%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MANTENIMIENTO</p>
                                            </div>
                                        </div>

                                        <!-- Maintenance Unit ADO-342 -->
                                        <div class="unit-bounce-mild flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/30 unit-item" data-unit="ADO-342">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-342</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6 ‚Ä¢ Guadalajara-Canc√∫n</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-yellow-600 dark:text-yellow-400 font-bold">68%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MANTENIMIENTO</p>
                                            </div>
                                        </div>

                                        <!-- Maintenance Unit ADO-134 -->
                                        <div class="unit-bounce-mild flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/30 unit-item" data-unit="ADO-134">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-134</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700 ‚Ä¢ CDMX-Guadalajara</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-yellow-600 dark:text-yellow-400 font-bold">78%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MANTENIMIENTO</p>
                                            </div>
                                        </div>

                                        <!-- Maintenance Unit ADO-789 -->
                                        <div class="unit-bounce-mild flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/30 unit-item" data-unit="ADO-789">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-789</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Scania Touring ‚Ä¢ CDMX-Guadalajara</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-yellow-600 dark:text-yellow-400 font-bold">65%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MANTENIMIENTO</p>
                                            </div>
                                        </div>

                                        <!-- Maintenance Unit ADO-456 -->
                                        <div class="unit-bounce-mild flex items-center justify-between p-2 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded cursor-pointer hover:bg-yellow-100 dark:hover:bg-yellow-900/30 unit-item" data-unit="ADO-456">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-yellow-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-456</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Scania Touring ‚Ä¢ CDMX-Oaxaca</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-yellow-600 dark:text-yellow-400 font-bold">76%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">MANTENIMIENTO</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- CDMX-Guadalajara Route -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">CDMX-Guadalajara</h4>
                                        <span class="text-xs text-gray-500 dark:text-gray-400">1,287 unidades</span>
                                    </div>
                                    <div class="space-y-2">
                                        <!-- Unit ADO-001 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-001">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-001</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Scania Touring</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">96%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-078 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-078">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-078</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">94%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-254 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-254">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-254</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">92%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-367 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-367">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-367</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">90%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-421 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-421">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-421</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">89%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Show more button -->
                                        <button class="w-full text-xs text-blue-600 dark:text-blue-400 hover:underline py-1">
                                            + Ver 1,281 unidades m√°s
                                        </button>
                                    </div>
                                </div>

                                <!-- Monterrey-Canc√∫n Route -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">Monterrey-Canc√∫n</h4>
                                        <span class="text-xs text-gray-500 dark:text-gray-400">1,198 unidades</span>
                                    </div>
                                    <div class="space-y-2">
                                        <!-- Unit ADO-092 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-092">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-092</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">91%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-198 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-198">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-198</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Scania Touring</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">87%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-334 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-334">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-334</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">85%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Show more button -->
                                        <button class="w-full text-xs text-blue-600 dark:text-blue-400 hover:underline py-1">
                                            + Ver 1,193 unidades m√°s
                                        </button>
                                    </div>
                                </div>

                                <!-- CDMX-Monterrey Route -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">CDMX-Monterrey</h4>
                                        <span class="text-xs text-gray-500 dark:text-gray-400">1,156 unidades</span>
                                    </div>
                                    <div class="space-y-2">
                                        <!-- Unit ADO-089 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-089">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-089</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">88%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-223 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-223">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-223</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">86%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Show more button -->
                                        <button class="w-full text-xs text-blue-600 dark:text-blue-400 hover:underline py-1">
                                            + Ver 1,153 unidades m√°s
                                        </button>
                                    </div>
                                </div>

                                <!-- Guadalajara-Canc√∫n Route -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">Guadalajara-Canc√∫n</h4>
                                        <span class="text-xs text-gray-500 dark:text-gray-400">1,203 unidades</span>
                                    </div>
                                    <div class="space-y-2">
                                        <!-- Unit ADO-187 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-187">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-187</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Scania Touring</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">89%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-445 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-445">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-445</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">84%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Show more button -->
                                        <button class="w-full text-xs text-blue-600 dark:text-blue-400 hover:underline py-1">
                                            + Ver 1,199 unidades m√°s
                                        </button>
                                    </div>
                                </div>

                                <!-- CDMX-Oaxaca Route -->
                                <div class="mb-6">
                                    <div class="flex items-center justify-between mb-2">
                                        <h4 class="text-sm font-semibold text-gray-700 dark:text-gray-300">CDMX-Oaxaca</h4>
                                        <span class="text-xs text-gray-500 dark:text-gray-400">1,124 unidades</span>
                                    </div>
                                    <div class="space-y-2">
                                        <!-- Unit ADO-203 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-203">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-203</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Marcopolo G7</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">83%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Unit ADO-567 -->
                                        <div class="flex items-center justify-between p-2 bg-gray-50 dark:bg-gray-700 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600 unit-item" data-unit="ADO-567">
                                            <div class="flex items-center">
                                                <div class="w-3 h-3 bg-green-500 rounded-full mr-2"></div>
                                                <div>
                                                    <p class="text-sm font-medium text-gray-900 dark:text-white">ADO-567</p>
                                                    <p class="text-xs text-gray-500 dark:text-gray-400">Irizar i6</p>
                                                </div>
                                            </div>
                                            <div class="text-right">
                                                <p class="text-xs text-green-600 dark:text-green-400">81%</p>
                                                <p class="text-xs text-gray-500 dark:text-gray-400">Eficiencia</p>
                                            </div>
                                        </div>

                                        <!-- Show more button -->
                                        <button class="w-full text-xs text-blue-600 dark:text-blue-400 hover:underline py-1">
                                            + Ver 1,121 unidades m√°s
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Main Content Area -->
                        <div class="lg:col-span-3 space-y-6">
                            <!-- Route Efficiency Overview -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <div class="flex items-center justify-between mb-6">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Panorama de Eficiencia por Rutas</h3>
                                    <div class="flex space-x-2">
                                        <select class="px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-sm">
                                            <option>√öltimos 7 d√≠as</option>
                                            <option>√öltimos 30 d√≠as</option>
                                            <option>√öltimos 90 d√≠as</option>
                                        </select>
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                            <i class="fas fa-download mr-2"></i>Exportar
                                        </button>
                                    </div>
                                </div>

                                <!-- Route Cards Grid -->
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                                    <!-- CDMX-Guadalajara -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">CDMX-Guadalajara</h4>
                                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-green-600 dark:text-green-400">91.2%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">287/295</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$2.18</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 91.2%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Monterrey-Canc√∫n -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">Monterrey-Canc√∫n</h4>
                                            <div class="w-3 h-3 bg-yellow-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-yellow-600 dark:text-yellow-400">76.8%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">198/210</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$2.67</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-yellow-500 h-2 rounded-full" style="width: 76.8%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- CDMX-Monterrey -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">CDMX-Monterrey</h4>
                                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-green-600 dark:text-green-400">88.4%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">156/162</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$2.29</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 88.4%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Guadalajara-Canc√∫n -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">Guadalajara-Canc√∫n</h4>
                                            <div class="w-3 h-3 bg-red-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-red-600 dark:text-red-400">68.1%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">203/218</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$3.12</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-red-500 h-2 rounded-full" style="width: 68.1%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- CDMX-Oaxaca -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">CDMX-Oaxaca</h4>
                                            <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-green-600 dark:text-green-400">85.7%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">124/128</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$2.43</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-green-500 h-2 rounded-full" style="width: 85.7%"></div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Other Routes Summary -->
                                    <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-4 hover:shadow-md transition-shadow">
                                        <div class="flex items-center justify-between mb-3">
                                            <h4 class="font-semibold text-gray-900 dark:text-white text-sm">Otras Rutas</h4>
                                            <div class="w-3 h-3 bg-blue-500 rounded-full"></div>
                                        </div>
                                        <div class="space-y-2">
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Eficiencia Promedio:</span>
                                                <span class="font-semibold text-blue-600 dark:text-blue-400">82.3%</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Unidades Activas:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">580/615</span>
                                            </div>
                                            <div class="flex justify-between text-sm">
                                                <span class="text-gray-600 dark:text-gray-400">Costo/km:</span>
                                                <span class="font-semibold text-gray-900 dark:text-white">$2.51</span>
                                            </div>
                                            <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 mt-3">
                                                <div class="bg-blue-500 h-2 rounded-full" style="width: 82.3%"></div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Efficiency Trends Chart -->
                            <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Tendencias de Eficiencia</h3>
                                <div class="h-64 w-full">
                                    <canvas id="efficiencyTrendChart"></canvas>
                                </div>
                            </div>

                            <!-- Performance Analysis -->
                            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                <!-- Critical Issues -->
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Problemas Cr√≠ticos de Eficiencia</h3>
                                    <div class="max-h-96 overflow-y-auto space-y-2 pr-2">
                                        <div class="border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-red-800 dark:text-red-400">ADO-156</h4>
                                                    <p class="text-sm text-red-600 dark:text-red-300">Eficiencia cr√≠tica: 32%</p>
                                                    <p class="text-xs text-red-500 dark:text-red-400 mt-1">Guadalajara-Canc√∫n | Sistema de frenos</p>
                                                </div>
                                                <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">
                                                    Cr√≠tico
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-red-800 dark:text-red-400">ADO-892</h4>
                                                    <p class="text-sm text-red-600 dark:text-red-300">Eficiencia cr√≠tica: 28%</p>
                                                    <p class="text-xs text-red-500 dark:text-red-400 mt-1">CDMX-Monterrey | Falla motor</p>
                                                </div>
                                                <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">
                                                    Cr√≠tico
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-red-500 bg-red-50 dark:bg-red-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-red-800 dark:text-red-400">ADO-573</h4>
                                                    <p class="text-sm text-red-600 dark:text-red-300">Eficiencia cr√≠tica: 35%</p>
                                                    <p class="text-xs text-red-500 dark:text-red-400 mt-1">Monterrey-Canc√∫n | Transmisi√≥n</p>
                                                </div>
                                                <button class="px-3 py-1 bg-red-600 text-white rounded text-xs hover:bg-red-700">
                                                    Cr√≠tico
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-orange-800 dark:text-orange-400">ADO-045</h4>
                                                    <p class="text-sm text-orange-600 dark:text-orange-300">Eficiencia baja: 71%</p>
                                                    <p class="text-xs text-orange-500 dark:text-orange-400 mt-1">Monterrey-Canc√∫n | Mantenimiento motor</p>
                                                </div>
                                                <button class="px-3 py-1 bg-orange-600 text-white rounded text-xs hover:bg-orange-700">
                                                    Alto
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-orange-800 dark:text-orange-400">ADO-342</h4>
                                                    <p class="text-sm text-orange-600 dark:text-orange-300">Eficiencia baja: 68%</p>
                                                    <p class="text-xs text-orange-500 dark:text-orange-400 mt-1">Guadalajara-Canc√∫n | Sistema hidr√°ulico</p>
                                                </div>
                                                <button class="px-3 py-1 bg-orange-600 text-white rounded text-xs hover:bg-orange-700">
                                                    Alto
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-orange-500 bg-orange-50 dark:bg-orange-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-orange-800 dark:text-orange-400">ADO-789</h4>
                                                    <p class="text-sm text-orange-600 dark:text-orange-300">Eficiencia baja: 65%</p>
                                                    <p class="text-xs text-orange-500 dark:text-orange-400 mt-1">CDMX-Guadalajara | Neum√°ticos desgaste</p>
                                                </div>
                                                <button class="px-3 py-1 bg-orange-600 text-white rounded text-xs hover:bg-orange-700">
                                                    Alto
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-134</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 78%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">CDMX-Guadalajara | Revisi√≥n programada</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-456</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 76%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">CDMX-Oaxaca | Filtros obstruidos</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-634</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 74%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">Monterrey-Canc√∫n | Calibraci√≥n necesaria</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-821</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 72%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">CDMX-Monterrey | Ajuste de v√°lvulas</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-293</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 79%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">Guadalajara-Canc√∫n | Sensor O2</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-567</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 77%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">CDMX-Oaxaca | Presi√≥n turbo</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-yellow-800 dark:text-yellow-400">ADO-129</h4>
                                                    <p class="text-sm text-yellow-600 dark:text-yellow-300">Eficiencia moderada: 75%</p>
                                                    <p class="text-xs text-yellow-500 dark:text-yellow-400 mt-1">CDMX-Guadalajara | Inyectores</p>
                                                </div>
                                                <button class="px-3 py-1 bg-yellow-600 text-white rounded text-xs hover:bg-yellow-700">
                                                    Medio
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-3 text-center">Mostrando 14 de 89 unidades con problemas</p>
                                </div>

                                <!-- Top Performers -->
                                <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white mb-4">Mejores Rendimientos</h3>
                                    <div class="max-h-96 overflow-y-auto space-y-2 pr-2">
                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-001</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 96%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Guadalajara | Operativo √≥ptimo</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-trophy text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#1</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-078</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 94%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Guadalajara | Operativo √≥ptimo</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-medal text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#2</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-092</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 91%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">Monterrey-Canc√∫n | Operativo √≥ptimo</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-award text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#3</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-234</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 90%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Monterrey | Mantenimiento reciente</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#4</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-567</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 89%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Oaxaca | Conductor experimentado</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#5</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-823</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 88%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">Guadalajara-Canc√∫n | Ruta optimizada</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#6</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-445</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 87%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Guadalajara | Modelo nuevo</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#7</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-776</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 86%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">Monterrey-Canc√∫n | Combustible premium</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#8</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-998</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 85%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Monterrey | Sistema h√≠brido</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#9</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-332</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 84%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Oaxaca | Aerodin√°micas mejoradas</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#10</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-187</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 83%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">Guadalajara-Canc√∫n | Tecnolog√≠a avanzada</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#11</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-654</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 82%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Guadalajara | Conductor premio</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#12</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-889</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 81%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">Monterrey-Canc√∫n | Mantenimiento preventivo</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#13</p>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="border-l-4 border-green-500 bg-green-50 dark:bg-green-900/20 p-3 rounded-r-lg">
                                            <div class="flex items-center justify-between">
                                                <div>
                                                    <h4 class="font-semibold text-green-800 dark:text-green-400">ADO-203</h4>
                                                    <p class="text-sm text-green-600 dark:text-green-300">Eficiencia excelente: 80%</p>
                                                    <p class="text-xs text-green-500 dark:text-green-400 mt-1">CDMX-Oaxaca | Sistema optimizado</p>
                                                </div>
                                                <div class="text-center">
                                                    <i class="fas fa-star text-green-600 dark:text-green-400 text-lg"></i>
                                                    <p class="text-xs text-green-600 dark:text-green-400 mt-1">#14</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <p class="text-xs text-gray-500 dark:text-gray-400 mt-3 text-center">Mostrando top 14 de 3,247 unidades con excelente rendimiento</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Historical Alerts Tab Content -->
                <div id="content-alerts" class="tab-content p-6">
                    <div class="mb-6">
                        <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Alertas Hist√≥ricas</h1>
                        <p class="text-gray-600 dark:text-gray-400">Historial completo de alertas y problemas cr√≠ticos de eficiencia</p>
                    </div>

                    <!-- Alert Statistics -->
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-6">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-red-100 dark:bg-red-900/30">
                                    <i class="fas fa-exclamation-triangle text-red-600 dark:text-red-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Alertas Cr√≠ticas</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">23</p>
                                    <p class="text-xs text-red-600 dark:text-red-400">√öltimas 24h</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-orange-100 dark:bg-orange-900/30">
                                    <i class="fas fa-exclamation text-orange-600 dark:text-orange-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Alertas Altas</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">89</p>
                                    <p class="text-xs text-orange-600 dark:text-orange-400">Esta semana</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-yellow-100 dark:bg-yellow-900/30">
                                    <i class="fas fa-info-circle text-yellow-600 dark:text-yellow-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Alertas Medias</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">234</p>
                                    <p class="text-xs text-yellow-600 dark:text-yellow-400">Este mes</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow p-6">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 dark:bg-green-900/30">
                                    <i class="fas fa-check-circle text-green-600 dark:text-green-400"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600 dark:text-gray-400">Resueltas</p>
                                    <p class="text-2xl font-semibold text-gray-900 dark:text-white">1,567</p>
                                    <p class="text-xs text-green-600 dark:text-green-400">√öltimo trimestre</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Filters and Search -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow mb-6">
                        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                            <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Filtros de B√∫squeda</h3>
                        </div>
                        <div class="p-6">
                            <div class="grid grid-cols-1 md:grid-cols-6 gap-4 mb-4">
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Unidad</label>
                                    <input type="text" id="alerts-filter-unit" class="alerts-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base" placeholder="Ej: ADO-001">
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Prioridad</label>
                                    <select id="alerts-filter-priority" class="alerts-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200">
                                        <option value="">Todas las Prioridades</option>
                                        <option value="cr√≠tico">Cr√≠tico</option>
                                        <option value="alto">Alto</option>
                                        <option value="medio">Medio</option>
                                        <option value="bajo">Bajo</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Estado</label>
                                    <select id="alerts-filter-status" class="alerts-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200">
                                        <option value="">Todos los Estados</option>
                                        <option value="activa">Activa</option>
                                        <option value="en-progreso">En Progreso</option>
                                        <option value="resuelta">Resuelta</option>
                                        <option value="cerrada">Cerrada</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Ruta</label>
                                    <select id="alerts-filter-route" class="alerts-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200">
                                        <option value="">Todas las Rutas</option>
                                        <option value="CDMX-Guadalajara">CDMX-Guadalajara</option>
                                        <option value="Monterrey-Canc√∫n">Monterrey-Canc√∫n</option>
                                        <option value="CDMX-Monterrey">CDMX-Monterrey</option>
                                        <option value="Guadalajara-Canc√∫n">Guadalajara-Canc√∫n</option>
                                        <option value="CDMX-Oaxaca">CDMX-Oaxaca</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1">Fecha Desde</label>
                                    <input type="date" id="alerts-filter-date-from" class="alerts-filter w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-200 text-base">
                                </div>
                                <div class="flex items-end space-x-2">
                                    <button id="alerts-clear-filters" class="flex-1 px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        <i class="fas fa-times mr-2"></i>Limpiar
                                    </button>
                                    <button id="alerts-export" class="flex-1 px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
                                        <i class="fas fa-download mr-2"></i>Exportar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Alerts Table -->
                    <div class="bg-white dark:bg-gray-800 rounded-lg shadow">
                        <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                            <div class="flex justify-between items-center">
                                <h3 class="text-lg font-semibold text-gray-900 dark:text-white">Historial de Alertas de Eficiencia</h3>
                                <div class="flex items-center space-x-2">
                                    <span class="text-sm text-gray-600 dark:text-gray-400">Mostrando <span id="alerts-showing-count">15</span> de <span id="alerts-total-count">2,347</span> alertas</span>
                                </div>
                            </div>
                        </div>
                        <div class="p-6">
                            <div class="overflow-x-auto">
                                <table id="alerts-table" class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
                                    <thead class="bg-gray-50 dark:bg-gray-700">
                                        <tr>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('timestamp')">
                                                Fecha y Hora <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('unit')">
                                                Unidad <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('priority')">
                                                Prioridad <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('description')">
                                                Descripci√≥n <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('route')">
                                                Ruta <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('efficiency')">
                                                Eficiencia <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-600" onclick="sortAlertsTable('status')">
                                                Estado <i class="fas fa-sort ml-1"></i>
                                            </th>
                                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">
                                                Acciones
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody class="bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700">
                                        <!-- Critical Alert 1 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="cr√≠tico" data-status="activa" data-unit="ADO-156" data-route="Guadalajara-Canc√∫n">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>15/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">14:23:45</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-156</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-exclamation-triangle mr-1"></i>Cr√≠tico
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Sistema de frenos - Falla cr√≠tica</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia cr√≠tica detectada: 32%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Guadalajara-Canc√∫n</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-red-600 dark:text-red-400">32%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-red-500 h-1 rounded-full" style="width: 32%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-circle mr-1 text-red-500"></i>Activa
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="view-alert text-blue-600 dark:text-blue-400 hover:underline mr-3" data-alert-id="ALERT-156-001" data-unit="ADO-156" data-priority="cr√≠tico">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="schedule-maintenance text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-156" data-issue="Sistema de frenos - Falla cr√≠tica" data-location="Guadalajara">
                                                    <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                </button>
                                                <button class="text-green-600 dark:text-green-400 hover:underline">
                                                    <i class="fas fa-check mr-1"></i>Resolver
                                                </button>
                                            </td>
                                        </tr>

                                        <!-- Critical Alert 2 -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="cr√≠tico" data-status="en-progreso" data-unit="ADO-892" data-route="CDMX-Monterrey">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>15/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">12:15:32</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-892</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-exclamation-triangle mr-1"></i>Cr√≠tico
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Falla motor - P√©rdida de potencia</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia cr√≠tica detectada: 28%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Monterrey</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-red-600 dark:text-red-400">28%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-red-500 h-1 rounded-full" style="width: 28%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                    <i class="fas fa-circle mr-1 text-yellow-500"></i>En Progreso
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="text-green-600 dark:text-green-400 hover:underline">
                                                    <i class="fas fa-check mr-1"></i>Resolver
                                                </button>
                                            </td>
                                        </tr>

                                        <!-- High Priority Alert -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="alto" data-status="activa" data-unit="ADO-045" data-route="Monterrey-Canc√∫n">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>15/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">09:45:12</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-045</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Mercedes O500</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300">
                                                    <i class="fas fa-exclamation mr-1"></i>Alto
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Mantenimiento motor requerido</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia baja detectada: 71%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Monterrey-Canc√∫n</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-orange-600 dark:text-orange-400">71%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-orange-500 h-1 rounded-full" style="width: 71%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-circle mr-1 text-red-500"></i>Activa
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="schedule-maintenance text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-045" data-issue="Mantenimiento motor requerido" data-location="Monterrey">
                                                    <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                </button>
                                                <button class="text-green-600 dark:text-green-400 hover:underline">
                                                    <i class="fas fa-check mr-1"></i>Resolver
                                                </button>
                                            </td>
                                        </tr>

                                        <!-- Medium Priority Alerts -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="medio" data-status="resuelta" data-unit="ADO-134" data-route="CDMX-Guadalajara">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>14/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">16:30:45</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-134</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Volvo 9700</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                    <i class="fas fa-info-circle mr-1"></i>Medio
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Revisi√≥n programada requerida</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia moderada: 78%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Guadalajara</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-yellow-600 dark:text-yellow-400">78%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-yellow-500 h-1 rounded-full" style="width: 78%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                    <i class="fas fa-circle mr-1 text-green-500"></i>Resuelta
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="text-gray-400 dark:text-gray-500 cursor-not-allowed">
                                                    <i class="fas fa-check mr-1"></i>Resuelto
                                                </button>
                                            </td>
                                        </tr>

                                        <!-- Additional sample alerts -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="alto" data-status="en-progreso" data-unit="ADO-342" data-route="Guadalajara-Canc√∫n">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>14/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">14:12:23</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-342</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Irizar i6</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 dark:bg-orange-900 dark:text-orange-300">
                                                    <i class="fas fa-exclamation mr-1"></i>Alto
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Sistema hidr√°ulico - Fuga detectada</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia baja detectada: 68%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">Guadalajara-Canc√∫n</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-orange-600 dark:text-orange-400">68%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-orange-500 h-1 rounded-full" style="width: 68%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                    <i class="fas fa-circle mr-1 text-yellow-500"></i>En Progreso
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="text-green-600 dark:text-green-400 hover:underline">
                                                    <i class="fas fa-check mr-1"></i>Resolver
                                                </button>
                                            </td>
                                        </tr>

                                        <!-- More alerts for demonstration -->
                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="medio" data-status="activa" data-unit="ADO-456" data-route="CDMX-Oaxaca">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>14/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">11:45:67</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-456</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Scania Touring</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300">
                                                    <i class="fas fa-info-circle mr-1"></i>Medio
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Filtros obstruidos - Limpieza requerida</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia moderada: 76%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Oaxaca</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-yellow-600 dark:text-yellow-400">76%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-yellow-500 h-1 rounded-full" style="width: 76%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                    <i class="fas fa-circle mr-1 text-red-500"></i>Activa
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="schedule-maintenance text-purple-600 dark:text-purple-400 hover:underline mr-3" data-unit="ADO-456" data-issue="Filtros obstruidos - Limpieza requerida" data-location="CDMX">
                                                    <i class="fas fa-calendar-plus mr-1"></i>Programar
                                                </button>
                                                <button class="text-green-600 dark:text-green-400 hover:underline">
                                                    <i class="fas fa-check mr-1"></i>Resolver
                                                </button>
                                            </td>
                                        </tr>

                                        <tr class="hover:bg-gray-50 dark:hover:bg-gray-700 alerts-row" data-priority="bajo" data-status="resuelta" data-unit="ADO-203" data-route="CDMX-Oaxaca">
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">
                                                <div>13/03/2024</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">13:20:11</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-medium text-gray-900 dark:text-white">ADO-203</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Marcopolo G7</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300">
                                                    <i class="fas fa-info mr-1"></i>Bajo
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-300">
                                                <div class="font-medium">Revisi√≥n neum√°ticos programada</div>
                                                <div class="text-xs text-gray-500 dark:text-gray-400">Eficiencia estable: 83%</div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-300">CDMX-Oaxaca</td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <div class="text-sm font-semibold text-green-600 dark:text-green-400">83%</div>
                                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-1 mt-1">
                                                    <div class="bg-green-500 h-1 rounded-full" style="width: 83%"></div>
                                                </div>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap">
                                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300">
                                                    <i class="fas fa-circle mr-1 text-green-500"></i>Resuelta
                                                </span>
                                            </td>
                                            <td class="px-6 py-4 whitespace-nowrap text-sm">
                                                <button class="text-blue-600 dark:text-blue-400 hover:underline mr-3">
                                                    <i class="fas fa-eye mr-1"></i>Ver
                                                </button>
                                                <button class="text-gray-400 dark:text-gray-500 cursor-not-allowed">
                                                    <i class="fas fa-check mr-1"></i>Resuelto
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <!-- Pagination -->
                            <div class="flex items-center justify-between mt-6">
                                <div class="flex items-center space-x-2">
                                    <button class="px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        <i class="fas fa-chevron-left mr-1"></i>Anterior
                                    </button>
                                    <span class="px-3 py-2 text-sm bg-blue-600 text-white rounded-md">1</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">2</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">3</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">...</span>
                                    <span class="px-3 py-2 text-sm text-gray-700 dark:text-gray-300">157</span>
                                    <button class="px-3 py-2 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500 transition-colors">
                                        Siguiente<i class="fas fa-chevron-right ml-1"></i>
                                    </button>
                                </div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">
                                    P√°gina 1 de 157
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Alert Details Modal (Hidden by default) -->
                    <div id="alert-details-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
                        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                            <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                                <div class="flex items-center justify-between">
                                    <h3 class="text-lg font-semibold text-gray-900 dark:text-white" id="alert-modal-title">Detalles de Alerta</h3>
                                    <button id="close-alert-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                        <i class="fas fa-times text-xl"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="p-6">
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                                    <!-- Alert Information -->
                                    <div>
                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-4">Informaci√≥n de la Alerta</h4>
                                        <div class="space-y-3">
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">ID de Alerta</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="alert-detail-id">ALERT-156-001</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Unidad</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="alert-detail-unit">ADO-156</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Prioridad</label>
                                                <p class="text-sm" id="alert-detail-priority">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                        <i class="fas fa-exclamation-triangle mr-1"></i>Cr√≠tico
                                                    </span>
                                                </p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Fecha y Hora</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="alert-detail-timestamp">15/03/2024 14:23:45</p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Estado</label>
                                                <p class="text-sm" id="alert-detail-status">
                                                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300">
                                                        <i class="fas fa-circle mr-1 text-red-500"></i>Activa
                                                    </span>
                                                </p>
                                            </div>
                                            <div>
                                                <label class="text-sm font-medium text-gray-600 dark:text-gray-400">Ruta</label>
                                                <p class="text-sm text-gray-900 dark:text-white" id="alert-detail-route">Guadalajara-Canc√∫n</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Alert Description and Actions -->
                                    <div>
                                        <h4 class="text-md font-semibold text-gray-900 dark:text-white mb-4">Descripci√≥n del Problema</h4>
                                        <div class="space-y-4">
                                            <div class="p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-700 rounded-lg">
                                                <h5 class="text-sm font-semibold text-red-800 dark:text-red-400 mb-2">Sistema de frenos - Falla cr√≠tica</h5>
                                                <p class="text-sm text-red-700 dark:text-red-300 mb-2">Se detect√≥ una eficiencia cr√≠tica del 32% en la unidad ADO-156. El sistema de frenos muestra signos de falla inminente que requiere atenci√≥n inmediata.</p>
                                                <div class="text-xs text-red-600 dark:text-red-400">
                                                    <p><strong>S√≠ntomas detectados:</strong></p>
                                                    <ul class="list-disc list-inside mt-1">
                                                        <li>P√©rdida de presi√≥n en el sistema hidr√°ulico</li>
                                                        <li>Ruido anormal en el sistema de frenado</li>
                                                        <li>Distancia de frenado aumentada</li>
                                                        <li>Vibraciones excesivas al frenar</li>
                                                    </ul>
                                                </div>
                                            </div>

                                            <div>
                                                <h5 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">M√©tricas de Rendimiento</h5>
                                                <div class="grid grid-cols-2 gap-4">
                                                    <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                        <p class="text-lg font-bold text-red-600 dark:text-red-400">32%</p>
                                                        <p class="text-xs text-gray-600 dark:text-gray-400">Eficiencia Actual</p>
                                                    </div>
                                                    <div class="text-center p-3 bg-gray-50 dark:bg-gray-700 rounded-lg">
                                                        <p class="text-lg font-bold text-gray-600 dark:text-gray-400">89%</p>
                                                        <p class="text-xs text-gray-600 dark:text-gray-400">Eficiencia Promedio</p>
                                                    </div>
                                                </div>
                                            </div>

                                            <div>
                                                <h5 class="text-sm font-semibold text-gray-900 dark:text-white mb-2">Recomendaciones</h5>
                                                <div class="space-y-2">
                                                    <div class="p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg">
                                                        <p class="text-sm text-yellow-800 dark:text-yellow-300">
                                                            <i class="fas fa-exclamation-triangle mr-2"></i>
                                                            <strong>Acci√≥n Inmediata:</strong> Retirar unidad de servicio hasta completar reparaci√≥n
                                                        </p>
                                                    </div>
                                                    <div class="p-3 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-700 rounded-lg">
                                                        <p class="text-sm text-blue-800 dark:text-blue-300">
                                                            <i class="fas fa-tools mr-2"></i>
                                                            <strong>Reparaci√≥n:</strong> Inspecci√≥n completa del sistema de frenos y reemplazo de componentes defectuosos
                                                        </p>
                                                    </div>
                                                    <div class="p-3 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg">
                                                        <p class="text-sm text-green-800 dark:text-green-300">
                                                            <i class="fas fa-calendar-alt mr-2"></i>
                                                            <strong>Prevenci√≥n:</strong> Programar mantenimiento preventivo cada 15,000 km
                                                        </p>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="flex justify-between items-center mt-6 pt-6 border-t border-gray-200 dark:border-gray-700">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm text-gray-600 dark:text-gray-400">T√©cnico Asignado:</span>
                                        <span class="text-sm font-medium text-gray-900 dark:text-white">Roberto Silva</span>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button class="px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm">
                                            <i class="fas fa-user-plus mr-2"></i>Asignar T√©cnico
                                        </button>
                                        <button class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm">
                                            <i class="fas fa-wrench mr-2"></i>Crear Orden de Trabajo
                                        </button>
                                        <button class="px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm">
                                            <i class="fas fa-check mr-2"></i>Marcar como Resuelta
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="content-routes" class="tab-content p-6">
                    <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-4">Gesti√≥n de Rutas</h1>
                    <p class="text-gray-600 dark:text-gray-400">Contenido de gesti√≥n de rutas aqu√≠...</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode support
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Initialize Charts
        document.addEventListener('DOMContentLoaded', function() {
            // Cost Breakdown Analysis Chart
            const costCtx = document.getElementById('costChart').getContext('2d');
            new Chart(costCtx, {
                type: 'line',
                data: {
                    labels: ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun'],
                    datasets: [{
                        label: 'Costos de Combustible',
                        data: [4.8, 4.6, 4.3, 4.1, 3.9, 3.7],
                        borderColor: '#ef4444',
                        backgroundColor: 'rgba(239, 68, 68, 0.1)',
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'Costos de Mantenimiento',
                        data: [3.2, 3.1, 2.8, 2.6, 2.4, 2.2],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'Costos Operacionales',
                        data: [2.8, 2.7, 2.5, 2.3, 2.2, 2.0],
                        borderColor: '#8b5cf6',
                        backgroundColor: 'rgba(139, 92, 246, 0.1)',
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }, {
                        label: 'Otros Costos',
                        data: [1.7, 1.4, 1.3, 1.2, 1.3, 1.2],
                        borderColor: '#06b6d4',
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        tension: 0.4,
                        pointRadius: 5,
                        pointHoverRadius: 8
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    },
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                usePointStyle: true,
                                padding: 15,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#374151',
                            borderWidth: 1,
                            cornerRadius: 8,
                            displayColors: true,
                            callbacks: {
                                title: function(context) {
                                    return 'An√°lisis de Costos - ' + context[0].label + ' 2024';
                                },
                                label: function(context) {
                                    return context.dataset.label + ': $' + context.parsed.y + 'M MXN';
                                },
                                afterBody: function(context) {
                                    const monthIndex = context[0].dataIndex;
                                    const detailedMetrics = [
                                        {
                                            // Enero
                                            totalSavings: '$0M',
                                            fuelEfficiency: '8.2 km/L',
                                            maintenanceReduction: '0%',
                                            routeOptimization: '0%',
                                            predictiveActions: '0 implementadas'
                                        },
                                        {
                                            // Febrero  
                                            totalSavings: '$0.7M',
                                            fuelEfficiency: '8.4 km/L',
                                            maintenanceReduction: '3.1%',
                                            routeOptimization: '2.8%',
                                            predictiveActions: '12 implementadas'
                                        },
                                        {
                                            // Marzo
                                            totalSavings: '$1.6M',
                                            fuelEfficiency: '8.7 km/L',
                                            maintenanceReduction: '12.5%',
                                            routeOptimization: '7.2%',
                                            predictiveActions: '28 implementadas'
                                        },
                                        {
                                            // Abril
                                            totalSavings: '$2.3M',
                                            fuelEfficiency: '8.9 km/L',
                                            maintenanceReduction: '18.8%',
                                            routeOptimization: '11.6%',
                                            predictiveActions: '45 implementadas'
                                        },
                                        {
                                            // Mayo
                                            totalSavings: '$2.7M',
                                            fuelEfficiency: '9.1 km/L',
                                            maintenanceReduction: '25.0%',
                                            routeOptimization: '14.3%',
                                            predictiveActions: '67 implementadas'
                                        },
                                        {
                                            // Junio
                                            totalSavings: '$3.4M',
                                            fuelEfficiency: '9.3 km/L',
                                            maintenanceReduction: '31.3%',
                                            routeOptimization: '18.7%',
                                            predictiveActions: '89 implementadas'
                                        }
                                    ];
                                    
                                    const metrics = detailedMetrics[monthIndex];
                                    return [
                                        '',
                                        '‚îÅ‚îÅ‚îÅ KPIs de Eficiencia ‚îÅ‚îÅ‚îÅ',
                                        'üí∞ Ahorros Acumulados: ' + metrics.totalSavings,
                                        '‚õΩ Eficiencia Combustible: ' + metrics.fuelEfficiency,
                                        'üîß Reducci√≥n Mantenimiento: ' + metrics.maintenanceReduction,
                                        'üõ£Ô∏è Optimizaci√≥n Rutas: ' + metrics.routeOptimization,
                                        'ü§ñ Acciones Predictivas: ' + metrics.predictiveActions,
                                        '',
                                        'üìä Total vs Enero: -$' + (12.5 - (context[0].parsed.y + context[1].parsed.y + context[2].parsed.y + context[3].parsed.y)).toFixed(1) + 'M MXN'
                                    ];
                                }
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        },
                        y: {
                            beginAtZero: true,
                            max: 5,
                            ticks: {
                                callback: function(value) {
                                    return '$' + value + 'M';
                                }
                            },
                            grid: {
                                display: true,
                                color: 'rgba(0, 0, 0, 0.1)'
                            }
                        }
                    }
                }
            });

            // Fleet Availability Chart - Regional Distribution
            const availabilityCtx = document.getElementById('availabilityChart').getContext('2d');
            new Chart(availabilityCtx, {
                type: 'doughnut',
                data: {
                    labels: [
                        'Regi√≥n CDMX', 
                        'Regi√≥n Guadalajara', 
                        'Regi√≥n Monterrey', 
                        'Regi√≥n Canc√∫n', 
                        'Regi√≥n Oaxaca',
                        'Otras Regiones'
                    ],
                    datasets: [{
                        label: 'Unidades Disponibles',
                        data: [387, 298, 245, 156, 124, 138],
                        backgroundColor: [
                            '#3b82f6', // Blue for CDMX
                            '#10b981', // Green for Guadalajara
                            '#f59e0b', // Orange for Monterrey
                            '#ef4444', // Red for Canc√∫n
                            '#8b5cf6', // Purple for Oaxaca
                            '#6b7280'  // Gray for Others
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff',
                        hoverBorderWidth: 3,
                        hoverOffset: 10
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'right',
                            labels: {
                                usePointStyle: true,
                                padding: 20,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#ffffff',
                            bodyColor: '#ffffff',
                            borderColor: '#374151',
                            borderWidth: 1,
                            cornerRadius: 8,
                            displayColors: true,
                            callbacks: {
                                title: function(context) {
                                    return context[0].label;
                                },
                                label: function(context) {
                                    const total = context.dataset.data.reduce((a, b) => a + b, 0);
                                    const percentage = ((context.parsed / total) * 100).toFixed(1);
                                    return [
                                        `Unidades: ${context.parsed}`,
                                        `Porcentaje: ${percentage}%`
                                    ];
                                },
                                afterBody: function(context) {
                                    const regionData = {
                                        'Regi√≥n CDMX': {
                                            operational: 356,
                                            maintenance: 24,
                                            critical: 7,
                                            coverage: '12 municipios',
                                            mainRoutes: ['CDMX-Guadalajara', 'CDMX-Monterrey', 'CDMX-Oaxaca']
                                        },
                                        'Regi√≥n Guadalajara': {
                                            operational: 267,
                                            maintenance: 23,
                                            critical: 8,
                                            coverage: '8 municipios',
                                            mainRoutes: ['CDMX-Guadalajara', 'Guadalajara-Canc√∫n']
                                        },
                                        'Regi√≥n Monterrey': {
                                            operational: 221,
                                            maintenance: 18,
                                            critical: 6,
                                            coverage: '6 municipios',
                                            mainRoutes: ['CDMX-Monterrey', 'Monterrey-Canc√∫n']
                                        },
                                        'Regi√≥n Canc√∫n': {
                                            operational: 134,
                                            maintenance: 15,
                                            critical: 7,
                                            coverage: '4 municipios',
                                            mainRoutes: ['Monterrey-Canc√∫n', 'Guadalajara-Canc√∫n']
                                        },
                                        'Regi√≥n Oaxaca': {
                                            operational: 108,
                                            maintenance: 12,
                                            critical: 4,
                                            coverage: '5 municipios',
                                            mainRoutes: ['CDMX-Oaxaca']
                                        },
                                        'Otras Regiones': {
                                            operational: 117,
                                            maintenance: 14,
                                            critical: 7,
                                            coverage: '15+ municipios',
                                            mainRoutes: ['Rutas regionales']
                                        }
                                    };
                                    
                                    const region = context[0].label;
                                    const data = regionData[region];
                                    if (data) {
                                        return [
                                            '',
                                            '‚îÅ‚îÅ‚îÅ Detalles de Regi√≥n ‚îÅ‚îÅ‚îÅ',
                                            `‚úÖ Operativas: ${data.operational}`,
                                            `üîß Mantenimiento: ${data.maintenance}`,
                                            `‚ö†Ô∏è Cr√≠ticas: ${data.critical}`,
                                            `üìç Cobertura: ${data.coverage}`,
                                            `üõ£Ô∏è Rutas: ${data.mainRoutes.join(', ')}`
                                        ];
                                    }
                                    return [];
                                }
                            }
                        }
                    },
                    cutout: '50%',
                    radius: '90%'
                }
            });

            // Efficiency Trend Chart (for Efficiency Management tab)
            const efficiencyTrendCtx = document.getElementById('efficiencyTrendChart');
            if (efficiencyTrendCtx) {
                new Chart(efficiencyTrendCtx.getContext('2d'), {
                    type: 'line',
                    data: {
                        labels: ['Lun', 'Mar', 'Mi√©', 'Jue', 'Vie', 'S√°b', 'Dom'],
                        datasets: [{
                            label: 'CDMX-Guadalajara',
                            data: [89, 92, 91, 94, 91, 89, 92],
                            borderColor: '#10b981',
                            backgroundColor: 'rgba(16, 185, 129, 0.1)',
                            tension: 0.4,
                            fill: false
                        }, {
                            label: 'Monterrey-Canc√∫n',
                            data: [74, 78, 76, 77, 75, 79, 78],
                            borderColor: '#f59e0b',
                            backgroundColor: 'rgba(245, 158, 11, 0.1)',
                            tension: 0.4,
                            fill: false
                        }, {
                            label: 'CDMX-Monterrey',
                            data: [86, 89, 88, 90, 87, 85, 89],
                            borderColor: '#3b82f6',
                            backgroundColor: 'rgba(59, 130, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        }, {
                            label: 'Guadalajara-Canc√∫n',
                            data: [65, 68, 67, 70, 69, 66, 68],
                            borderColor: '#ef4444',
                            backgroundColor: 'rgba(239, 68, 68, 0.1)',
                            tension: 0.4,
                            fill: false
                        }, {
                            label: 'CDMX-Oaxaca',
                            data: [83, 86, 85, 87, 84, 82, 86],
                            borderColor: '#8b5cf6',
                            backgroundColor: 'rgba(139, 92, 246, 0.1)',
                            tension: 0.4,
                            fill: false
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        },
                        scales: {
                            y: {
                                beginAtZero: false,
                                min: 60,
                                max: 100,
                                ticks: {
                                    callback: function(value) {
                                        return value + '%';
                                    }
                                }
                            }
                        }
                    }
                });
            }

            // Update real-time data every 5 seconds
            setInterval(updateRealtimeData, 5000);
        });

        function updateRealtimeData() {
            // Simulate real-time updates
            const elements = document.querySelectorAll('.pulse-dot');
            elements.forEach(el => {
                const random = Math.random();
                if (random > 0.7) {
                    el.style.animationDuration = '1s';
                } else {
                    el.style.animationDuration = '2s';
                }
            });
        }

        // Tab switching function
        function switchTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active state from all navigation items
            document.querySelectorAll('.sidebar-nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Show selected tab content
            const selectedContent = document.getElementById('content-' + tabName);
            if (selectedContent) {
                selectedContent.classList.add('active');
            }
            
            // Add active state to selected navigation item
            const selectedNav = document.getElementById('nav-' + tabName);
            if (selectedNav) {
                selectedNav.classList.add('active');
            }
        }

        // Sidebar navigation
        document.addEventListener('DOMContentLoaded', function() {
            // Navigation event listeners
            document.getElementById('nav-dashboard')?.addEventListener('click', () => switchTab('dashboard'));
            document.getElementById('nav-fleet')?.addEventListener('click', () => switchTab('fleet'));
            document.getElementById('nav-efficiency')?.addEventListener('click', () => switchTab('efficiency'));
            document.getElementById('nav-maintenance')?.addEventListener('click', () => switchTab('maintenance'));
            document.getElementById('nav-routes')?.addEventListener('click', () => switchTab('routes'));
            document.getElementById('nav-alerts')?.addEventListener('click', () => switchTab('alerts'));
            document.getElementById('nav-mobile')?.addEventListener('click', () => {
                window.open('mobile.html', '_blank');
            });

            // Sidebar expand/collapse functionality
            const toggleSidebar = document.getElementById('toggleSidebar');
            const sidebar = document.getElementById('sidebar');
            const toggleIcon = document.getElementById('toggleIcon');

            if (toggleSidebar && sidebar && toggleIcon) {
                toggleSidebar.addEventListener('click', () => {
                    sidebar.classList.toggle('expanded');
                    toggleIcon.classList.toggle('rotate-180');
                });
            }

            // Maintenance tab switching functionality
            const supervisorTab = document.getElementById('supervisor-tab');
            const unitsStatusTab = document.getElementById('units-status-tab');
            const supervisorView = document.getElementById('supervisor-view');
            const unitsStatusView = document.getElementById('units-status-view');

            if (supervisorTab && unitsStatusTab && supervisorView && unitsStatusView) {
                supervisorTab.addEventListener('click', () => {
                    // Update tab buttons
                    supervisorTab.classList.add('active');
                    supervisorTab.classList.remove('border-transparent', 'text-gray-500');
                    supervisorTab.classList.add('border-blue-500', 'text-blue-600');
                    
                    unitsStatusTab.classList.remove('active');
                    unitsStatusTab.classList.remove('border-blue-500', 'text-blue-600');
                    unitsStatusTab.classList.add('border-transparent', 'text-gray-500');
                    
                    // Show/hide views
                    supervisorView.classList.remove('hidden');
                    unitsStatusView.classList.add('hidden');
                });

                unitsStatusTab.addEventListener('click', () => {
                    // Update tab buttons
                    unitsStatusTab.classList.add('active');
                    unitsStatusTab.classList.remove('border-transparent', 'text-gray-500');
                    unitsStatusTab.classList.add('border-blue-500', 'text-blue-600');
                    
                    supervisorTab.classList.remove('active');
                    supervisorTab.classList.remove('border-blue-500', 'text-blue-600');
                    supervisorTab.classList.add('border-transparent', 'text-gray-500');
                    
                    // Show/hide views
                    unitsStatusView.classList.remove('hidden');
                    supervisorView.classList.add('hidden');
                });
            }

            // Fleet Management functionality
            initializeFleetManagement();
        });

        // Fleet Management Functions
        function initializeFleetManagement() {
            // Search functionality
            const fleetFilters = document.querySelectorAll('.fleet-filter');
            if (fleetFilters.length > 0) {
                fleetFilters.forEach(filter => {
                    filter.addEventListener('input', filterFleetTable);
                    filter.addEventListener('change', filterFleetTable);
                });
            }

            // Clear filters
            const clearButton = document.getElementById('clear-filters');
            if (clearButton) {
                clearButton.addEventListener('click', clearAllFilters);
            }

            // Export functionality
            const exportButton = document.getElementById('export-fleet');
            if (exportButton) {
                exportButton.addEventListener('click', exportFleetData);
            }

            // View details functionality
            const detailButtons = document.querySelectorAll('.view-details');
            detailButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unitId = this.getAttribute('data-unit');
                    showUnitDetails(unitId);
                });
            });

            // View history functionality  
            const historyButtons = document.querySelectorAll('.view-history');
            historyButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unitId = this.getAttribute('data-unit');
                    showMaintenanceHistory(unitId);
                });
            });

            // View inspection functionality
            const inspectionButtons = document.querySelectorAll('.view-inspection');
            inspectionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unitId = this.getAttribute('data-unit');
                    showInspectionChecklist(unitId);
                });
            });

            // View alert functionality
            const alertButtons = document.querySelectorAll('.view-alert');
            alertButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const alertId = this.getAttribute('data-alert-id');
                    const unitId = this.getAttribute('data-unit');
                    const priority = this.getAttribute('data-priority');
                    showAlertDetails(alertId, unitId, priority);
                });
            });

            // Close modal functionality
            const closeModal = document.getElementById('close-modal');
            if (closeModal) {
                closeModal.addEventListener('click', () => {
                    document.getElementById('unit-details-modal').classList.add('hidden');
                });
            }

            const closeHistoryModal = document.getElementById('close-history-modal');
            if (closeHistoryModal) {
                closeHistoryModal.addEventListener('click', () => {
                    document.getElementById('history-modal').classList.add('hidden');
                });
            }

            // Close modal when clicking outside
            document.getElementById('unit-details-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            document.getElementById('history-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            // Close inspection modal functionality
            const closeInspectionModal = document.getElementById('close-inspection-modal');
            if (closeInspectionModal) {
                closeInspectionModal.addEventListener('click', () => {
                    document.getElementById('inspection-modal').classList.add('hidden');
                });
            }

            // Close inspection modal when clicking outside
            document.getElementById('inspection-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            // Close alert details modal functionality
            const closeAlertModal = document.getElementById('close-alert-modal');
            if (closeAlertModal) {
                closeAlertModal.addEventListener('click', () => {
                    document.getElementById('alert-details-modal').classList.add('hidden');
                });
            }

            // Close alert details modal when clicking outside
            document.getElementById('alert-details-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.add('hidden');
                }
            });

            // Schedule Maintenance functionality
            const scheduleButtons = document.querySelectorAll('.schedule-maintenance');
            scheduleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const unit = this.getAttribute('data-unit');
                    const issue = this.getAttribute('data-issue');
                    const location = this.getAttribute('data-location');
                    openMaintenanceCalendar(unit, issue, location);
                });
            });

            // Initialize Alerts functionality
            initializeAlertsManagement();
        }

        function filterFleetTable() {
            const plateFilter = document.getElementById('filter-plates')?.value.toLowerCase() || '';
            const modelFilter = document.getElementById('filter-model')?.value.toLowerCase() || '';
            const nameFilter = document.getElementById('filter-name')?.value.toLowerCase() || '';
            const routeFilter = document.getElementById('filter-route')?.value.toLowerCase() || '';
            const vinFilter = document.getElementById('filter-vin')?.value.toLowerCase() || '';

            const rows = document.querySelectorAll('.fleet-row');
            let visibleCount = 0;

            rows.forEach(row => {
                const cells = row.querySelectorAll('td');
                const unitName = cells[1]?.textContent.toLowerCase() || '';
                const plates = cells[2]?.textContent.toLowerCase() || '';
                const model = cells[3]?.textContent.toLowerCase() || '';
                const vin = cells[4]?.textContent.toLowerCase() || '';
                const route = cells[5]?.textContent.toLowerCase() || '';

                const matchesPlate = plates.includes(plateFilter);
                const matchesModel = model.includes(modelFilter);
                const matchesName = unitName.includes(nameFilter);
                const matchesRoute = route.includes(routeFilter);
                const matchesVin = vin.includes(vinFilter);

                if (matchesPlate && matchesModel && matchesName && matchesRoute && matchesVin) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            // Update count display
            const showingCount = document.getElementById('showing-count');
            if (showingCount) {
                showingCount.textContent = visibleCount;
            }
        }

        function clearAllFilters() {
            // Clear all filter inputs
            document.getElementById('filter-plates').value = '';
            document.getElementById('filter-model').value = '';
            document.getElementById('filter-name').value = '';
            document.getElementById('filter-route').value = '';
            document.getElementById('filter-vin').value = '';

            // Show all rows
            const rows = document.querySelectorAll('.fleet-row');
            rows.forEach(row => {
                row.style.display = '';
            });

            // Reset count
            const showingCount = document.getElementById('showing-count');
            if (showingCount) {
                showingCount.textContent = rows.length;
            }
        }

        function exportFleetData() {
            // Simulate export functionality
            showCustomAlert('Exportando datos de flota...', 'info');
            setTimeout(() => {
                showCustomAlert('Datos exportados exitosamente', 'success');
            }, 2000);
        }

        function showUnitDetails(unitId) {
            // Sample data - in real implementation this would come from an API
            const interiorPhotos = [
                'https://pfst.cf2.poecdn.net/base/image/58c16f47f26c402814995fb5a5c523b5ed579ee3d37140dadcb0fccdc537979b?w=491&h=320',
                'https://pfst.cf2.poecdn.net/base/image/21ccbe5d3eb9a8f55a45c382a12841d7900dea15dd16844ab9bcccb480883137?w=720&h=540',
                'https://pfst.cf2.poecdn.net/base/image/8cfecdb1bab17a66372218c86b193bb0266a53ee323a61f7b3d1ded37001f913?w=259&h=194',
                'https://pfst.cf2.poecdn.net/base/image/734ba7ad621ac2e2c9324274856757b704c889b040106c50d25745baf1391ee5?w=800&h=533'
            ];
            
            const unitData = {
                'ADO-001': {
                    unitId: 'ADO-001',
                    plates: '123-ABC',
                    model: 'Scania Touring',
                    year: '2020',
                    vin: 'YS3R4X20005789123',
                    route: 'CDMX-Guadalajara',
                    mileage: '287,450 km',
                    status: '<span class="text-green-600">Operativo</span>',
                    efficiency: '9.2',
                    uptime: '96.8',
                    trips: '923',
                    mainPhoto: 'https://pfst.cf2.poecdn.net/base/image/c7a21c585314deaa4da0811346f6d48935bba14dd78e314c79a3a0d4258efc41?w=278&h=181',
                    interiorPhoto: interiorPhotos[0]
                },
                'ADO-045': {
                    unitId: 'ADO-045',
                    plates: '456-DEF',
                    model: 'Mercedes O500',
                    year: '2019',
                    vin: 'WDB90623451456789',
                    route: 'Monterrey-Canc√∫n',
                    mileage: '312,870 km',
                    status: '<span class="text-yellow-600">En Mantenimiento</span>',
                    efficiency: '8.4',
                    uptime: '87.3',
                    trips: '756',
                    mainPhoto: 'https://pfst.cf2.poecdn.net/base/image/a1f4f3c928646945c8b7272bfe16291695fb19d81628e2a8ef6cb498e12e8d2c?w=300&h=168',
                    interiorPhoto: interiorPhotos[1]
                },
                'ADO-089': {
                    unitId: 'ADO-089',
                    plates: '789-GHI',
                    model: 'Irizar i6',
                    year: '2021',
                    vin: 'VF7LC9HZ8MN789456',
                    route: 'CDMX-Monterrey',
                    mileage: '198,230 km',
                    status: '<span class="text-green-600">Operativo</span>',
                    efficiency: '9.8',
                    uptime: '98.1',
                    trips: '1,124',
                    mainPhoto: 'https://pfst.cf2.poecdn.net/base/image/ab61f4d63d4a8890ef8f776488eaf7aa2d345baf483dda9753d62553fa3f68c0?w=275&h=183',
                    interiorPhoto: interiorPhotos[2]
                },
                'ADO-156': {
                    unitId: 'ADO-156',
                    plates: '321-JKL',
                    model: 'Volvo 9700',
                    year: '2018',
                    vin: '4V4NC9EH8JN123654',
                    route: 'Guadalajara-Canc√∫n',
                    mileage: '425,600 km',
                    status: '<span class="text-red-600">Fuera de Servicio</span>',
                    efficiency: '7.2',
                    uptime: '45.8',
                    trips: '234',
                    mainPhoto: 'https://pfst.cf2.poecdn.net/base/image/173e3e0ac7373834fbea92dc9c1d8fb282528068d6393ff91ca41e360c1d2649?w=300&h=168',
                    interiorPhoto: interiorPhotos[3]
                },
                'ADO-203': {
                    unitId: 'ADO-203',
                    plates: '654-MNO',
                    model: 'Marcopolo G7',
                    year: '2022',
                    vin: '9BM3T85F8NP987321',
                    route: 'CDMX-Oaxaca',
                    mileage: '89,340 km',
                    status: '<span class="text-green-600">Operativo</span>',
                    efficiency: '10.1',
                    uptime: '99.2',
                    trips: '567',
                    mainPhoto: 'https://pfst.cf2.poecdn.net/base/image/c7a21c585314deaa4da0811346f6d48935bba14dd78e314c79a3a0d4258efc41?w=278&h=181',
                    interiorPhoto: interiorPhotos[0]
                }
            };

            const data = unitData[unitId];
            if (data) {
                // Populate modal with data
                document.getElementById('modal-title').textContent = `Detalles de ${data.unitId}`;
                document.getElementById('detail-unit-id').textContent = data.unitId;
                document.getElementById('detail-plates').textContent = data.plates;
                document.getElementById('detail-model').textContent = data.model;
                document.getElementById('detail-year').textContent = data.year;
                document.getElementById('detail-vin').textContent = data.vin;
                document.getElementById('detail-route').textContent = data.route;
                document.getElementById('detail-mileage').textContent = data.mileage;
                document.getElementById('detail-status').innerHTML = data.status;
                document.getElementById('detail-efficiency').textContent = data.efficiency;
                document.getElementById('detail-uptime').textContent = data.uptime;
                document.getElementById('detail-trips').textContent = data.trips;
                
                // Set the main photo
                document.getElementById('detail-main-photo').src = data.mainPhoto;
                
                // Set the interior photo
                document.getElementById('detail-interior-photo').src = data.interiorPhoto;

                // Show modal
                document.getElementById('unit-details-modal').classList.remove('hidden');
            }
        }

        function showMaintenanceHistory(unitId) {
            // Show history modal
            document.getElementById('history-modal-title').textContent = `Historial de Mantenimiento - ${unitId}`;
            document.getElementById('history-modal').classList.remove('hidden');
        }

        function showInspectionChecklist(unitId) {
            // Sample data - in real implementation this would come from an API
            const unitData = {
                'ADO-001': {
                    unitId: 'ADO-001',
                    model: 'Scania Touring',
                    plates: '123-ABC'
                },
                'ADO-045': {
                    unitId: 'ADO-045',
                    model: 'Mercedes O500',
                    plates: '456-DEF'
                },
                'ADO-089': {
                    unitId: 'ADO-089',
                    model: 'Irizar i6',
                    plates: '789-GHI'
                },
                'ADO-156': {
                    unitId: 'ADO-156',
                    model: 'Volvo 9700',
                    plates: '321-JKL'
                },
                'ADO-203': {
                    unitId: 'ADO-203',
                    model: 'Marcopolo G7',
                    plates: '654-MNO'
                }
            };

            const data = unitData[unitId];
            if (data) {
                // Update modal title and info
                document.getElementById('inspection-modal-title').textContent = 'Lista de Verificaci√≥n de Inspecci√≥n Vehicular';
                document.getElementById('inspection-unit-info').textContent = `${data.unitId} | ${data.model} | Placas: ${data.plates}`;

                // Show modal
                document.getElementById('inspection-modal').classList.remove('hidden');
            }
        }

        function showAlertDetails(alertId, unitId, priority) {
            // Update modal content with alert details
            document.getElementById('alert-detail-id').textContent = alertId;
            document.getElementById('alert-detail-unit').textContent = unitId;
            
            // Show alert details modal
            document.getElementById('alert-details-modal').classList.remove('hidden');
        }

        // Alerts Management Functions
        function initializeAlertsManagement() {
            // Search and filter functionality for alerts
            const alertsFilters = document.querySelectorAll('.alerts-filter');
            if (alertsFilters.length > 0) {
                alertsFilters.forEach(filter => {
                    filter.addEventListener('input', filterAlertsTable);
                    filter.addEventListener('change', filterAlertsTable);
                });
            }

            // Clear alerts filters
            const alertsClearButton = document.getElementById('alerts-clear-filters');
            if (alertsClearButton) {
                alertsClearButton.addEventListener('click', clearAllAlertsFilters);
            }

            // Export alerts functionality
            const alertsExportButton = document.getElementById('alerts-export');
            if (alertsExportButton) {
                alertsExportButton.addEventListener('click', exportAlertsData);
            }
        }

        function filterAlertsTable() {
            const unitFilter = document.getElementById('alerts-filter-unit')?.value.toLowerCase() || '';
            const priorityFilter = document.getElementById('alerts-filter-priority')?.value.toLowerCase() || '';
            const statusFilter = document.getElementById('alerts-filter-status')?.value.toLowerCase() || '';
            const routeFilter = document.getElementById('alerts-filter-route')?.value.toLowerCase() || '';
            const dateFromFilter = document.getElementById('alerts-filter-date-from')?.value || '';

            const rows = document.querySelectorAll('.alerts-row');
            let visibleCount = 0;

            rows.forEach(row => {
                const unit = row.getAttribute('data-unit')?.toLowerCase() || '';
                const priority = row.getAttribute('data-priority')?.toLowerCase() || '';
                const status = row.getAttribute('data-status')?.toLowerCase() || '';
                const route = row.getAttribute('data-route')?.toLowerCase() || '';

                const matchesUnit = !unitFilter || unit.includes(unitFilter);
                const matchesPriority = !priorityFilter || priority === priorityFilter;
                const matchesStatus = !statusFilter || status === statusFilter;
                const matchesRoute = !routeFilter || route === routeFilter;
                // Date filtering can be implemented based on actual date parsing
                const matchesDate = true; // Simplified for demo

                if (matchesUnit && matchesPriority && matchesStatus && matchesRoute && matchesDate) {
                    row.style.display = '';
                    visibleCount++;
                } else {
                    row.style.display = 'none';
                }
            });

            // Update count display
            const alertsShowingCount = document.getElementById('alerts-showing-count');
            if (alertsShowingCount) {
                alertsShowingCount.textContent = visibleCount;
            }
        }

        function clearAllAlertsFilters() {
            // Clear all filter inputs
            document.getElementById('alerts-filter-unit').value = '';
            document.getElementById('alerts-filter-priority').value = '';
            document.getElementById('alerts-filter-status').value = '';
            document.getElementById('alerts-filter-route').value = '';
            document.getElementById('alerts-filter-date-from').value = '';

            // Show all rows
            const rows = document.querySelectorAll('.alerts-row');
            rows.forEach(row => {
                row.style.display = '';
            });

            // Reset count
            const alertsShowingCount = document.getElementById('alerts-showing-count');
            if (alertsShowingCount) {
                alertsShowingCount.textContent = rows.length;
            }
        }

        function exportAlertsData() {
            // Simulate export functionality
            showCustomAlert('Exportando historial de alertas...', 'info');
            setTimeout(() => {
                showCustomAlert('Historial de alertas exportado exitosamente', 'success');
            }, 2000);
        }

        // Global variable to track sort direction for alerts table
        let alertsSortDirection = {};

        function sortAlertsTable(column) {
            const table = document.getElementById('alerts-table');
            const tbody = table.querySelector('tbody');
            const rows = Array.from(tbody.querySelectorAll('.alerts-row'));
            
            // Toggle sort direction
            alertsSortDirection[column] = alertsSortDirection[column] === 'asc' ? 'desc' : 'asc';
            
            rows.sort((a, b) => {
                let aValue, bValue;
                
                switch(column) {
                    case 'timestamp':
                        // Extract date from first cell
                        aValue = a.cells[0].textContent.trim();
                        bValue = b.cells[0].textContent.trim();
                        break;
                    case 'unit':
                        aValue = a.getAttribute('data-unit') || '';
                        bValue = b.getAttribute('data-unit') || '';
                        break;
                    case 'priority':
                        // Custom priority order
                        const priorityOrder = { 'cr√≠tico': 4, 'alto': 3, 'medio': 2, 'bajo': 1 };
                        aValue = priorityOrder[a.getAttribute('data-priority')] || 0;
                        bValue = priorityOrder[b.getAttribute('data-priority')] || 0;
                        break;
                    case 'description':
                        aValue = a.cells[3].textContent.trim();
                        bValue = b.cells[3].textContent.trim();
                        break;
                    case 'route':
                        aValue = a.getAttribute('data-route') || '';
                        bValue = b.getAttribute('data-route') || '';
                        break;
                    case 'efficiency':
                        // Extract percentage value
                        aValue = parseFloat(a.cells[5].textContent.replace('%', '')) || 0;
                        bValue = parseFloat(b.cells[5].textContent.replace('%', '')) || 0;
                        break;
                    case 'status':
                        aValue = a.getAttribute('data-status') || '';
                        bValue = b.getAttribute('data-status') || '';
                        break;
                    default:
                        return 0;
                }
                
                if (typeof aValue === 'string') {
                    aValue = aValue.toLowerCase();
                    bValue = bValue.toLowerCase();
                }
                
                if (alertsSortDirection[column] === 'asc') {
                    return aValue > bValue ? 1 : aValue < bValue ? -1 : 0;
                } else {
                    return aValue < bValue ? 1 : aValue > bValue ? -1 : 0;
                }
            });
            
            // Reorder the rows in the table
            rows.forEach(row => tbody.appendChild(row));
            
            // Update sort indicators in header
            const headers = table.querySelectorAll('th i.fa-sort');
            headers.forEach(icon => {
                icon.className = 'fas fa-sort ml-1';
            });
            
            const currentHeader = table.querySelector(`th[onclick="sortAlertsTable('${column}')"] i`);
            if (currentHeader) {
                currentHeader.className = `fas fa-sort-${alertsSortDirection[column] === 'asc' ? 'up' : 'down'} ml-1`;
            }
        }

        // Central Calendar functionality
        function openMaintenanceCalendar(unit, issue, location) {
            // Create the calendar modal
            const calendarModal = createMaintenanceCalendarModal(unit, issue, location);
            document.body.appendChild(calendarModal);
            
            // Show the modal
            calendarModal.classList.remove('hidden');
            
            // Initialize calendar functionality
            initializeCalendarFunctionality(unit, issue, location);
        }

        function createMaintenanceCalendarModal(unit, issue, location) {
            const modalDiv = document.createElement('div');
            modalDiv.id = 'maintenance-calendar-modal';
            modalDiv.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
            
            modalDiv.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-7xl w-full mx-4 max-h-[95vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200 dark:border-gray-700">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">Centro de Programaci√≥n de Mantenimiento</h3>
                                <p class="text-sm text-gray-600 dark:text-gray-400 mt-1">
                                    Unidad: <span class="font-medium">${unit}</span> | Problema: <span class="font-medium">${issue}</span> | Ubicaci√≥n: <span class="font-medium">${location}</span>
                                </p>
                            </div>
                            <button id="close-calendar-modal" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="p-6">
                        <div class="grid grid-cols-1 lg:grid-cols-4 gap-6">
                            <!-- Talleres Sidebar -->
                            <div class="lg:col-span-1">
                                <div class="bg-gray-50 dark:bg-gray-700 rounded-lg p-4">
                                    <h4 class="text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center">
                                        <i class="fas fa-wrench text-blue-600 dark:text-blue-400 mr-2"></i>
                                        Talleres Disponibles
                                    </h4>
                                    <div class="space-y-3">
                                        ${generateMaintenanceShops()}
                                    </div>
                                </div>
                                
                                <!-- Recommendation -->
                                <div class="mt-4 p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-700 rounded-lg">
                                    <h5 class="text-sm font-semibold text-green-800 dark:text-green-400 mb-2">
                                        <i class="fas fa-lightbulb mr-1"></i>Recomendaci√≥n IA
                                    </h5>
                                    <p class="text-xs text-green-700 dark:text-green-300 mb-2">
                                        <strong>Taller M√°s Cercano:</strong> Taller Sur Guadalajara
                                    </p>
                                    <p class="text-xs text-green-600 dark:text-green-400">
                                        ‚Ä¢ Distancia: 12 km<br>
                                        ‚Ä¢ Disponibilidad: Inmediata<br>
                                        ‚Ä¢ Especialidad: Sistemas de frenos<br>
                                        ‚Ä¢ Tiempo estimado: 4-6 horas
                                    </p>
                                </div>
                            </div>
                            
                            <!-- Calendar Area -->
                            <div class="lg:col-span-3">
                                <div class="bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg">
                                    <!-- Calendar Header -->
                                    <div class="p-4 border-b border-gray-200 dark:border-gray-700">
                                        <div class="flex items-center justify-between">
                                            <h4 class="text-lg font-semibold text-gray-900 dark:text-white">
                                                Calendario Semanal - Marzo 2024
                                            </h4>
                                            <div class="flex items-center space-x-2">
                                                <button class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-500">
                                                    <i class="fas fa-chevron-left mr-1"></i>Anterior
                                                </button>
                                                <span class="px-3 py-1 text-sm font-medium text-gray-900 dark:text-white">Semana del 11-17 Mar</span>
                                                <button class="px-3 py-1 text-sm bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded hover:bg-gray-200 dark:hover:bg-gray-500">
                                                    Siguiente<i class="fas fa-chevron-right ml-1"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Calendar Grid -->
                                    <div class="overflow-x-auto">
                                        ${generateCalendarGrid()}
                                    </div>
                                </div>
                                
                                <!-- Action Buttons -->
                                <div class="flex justify-between items-center mt-6">
                                    <div class="flex items-center space-x-4">
                                        <span class="text-sm text-gray-600 dark:text-gray-400">Slot Seleccionado:</span>
                                        <span id="selected-slot" class="text-sm font-medium text-gray-900 dark:text-white">Ninguno</span>
                                    </div>
                                    <div class="flex space-x-3">
                                        <button id="cancel-scheduling" class="px-4 py-2 bg-gray-100 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-md hover:bg-gray-200 dark:hover:bg-gray-500">
                                            Cancelar
                                        </button>
                                        <button id="confirm-scheduling" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700" disabled>
                                            Confirmar Programaci√≥n
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            return modalDiv;
        }

        function generateMaintenanceShops() {
            const shops = [
                { name: 'Taller Norte CDMX', availability: 'disponible', units: 3, speciality: 'Motor y Transmisi√≥n', distance: '45 km' },
                { name: 'Taller Sur Guadalajara', availability: 'disponible', units: 1, speciality: 'Frenos y Suspensi√≥n', distance: '12 km' },
                { name: 'Taller Centro Monterrey', availability: 'ocupado', units: 6, speciality: 'Sistemas El√©ctricos', distance: '230 km' },
                { name: 'Taller Este Canc√∫n', availability: 'disponible', units: 2, speciality: 'Aire Acondicionado', distance: '340 km' },
                { name: 'Taller Oeste Guadalajara', availability: 'mantenimiento', units: 0, speciality: 'Carrocer√≠a', distance: '18 km' },
                { name: 'Taller Principal CDMX', availability: 'disponible', units: 4, speciality: 'General', distance: '50 km' },
                { name: 'Taller Sur Oaxaca', availability: 'ocupado', units: 5, speciality: 'Neum√°ticos', distance: '420 km' },
                { name: 'Taller Norte Monterrey', availability: 'disponible', units: 2, speciality: 'Hidr√°ulicos', distance: '235 km' },
                { name: 'Taller Central Puebla', availability: 'disponible', units: 1, speciality: 'Sistemas de Control', distance: '280 km' },
                { name: 'Taller Express Guadalajara', availability: 'disponible', units: 0, speciality: 'Reparaciones R√°pidas', distance: '8 km' }
            ];

            return shops.map(shop => {
                const statusClass = shop.availability === 'disponible' ? 'bg-green-500' : 
                                  shop.availability === 'ocupado' ? 'bg-red-500' : 'bg-gray-500';
                const bgClass = shop.availability === 'disponible' ? 'bg-white dark:bg-gray-800 border-green-200 dark:border-green-700' : 
                               shop.availability === 'ocupado' ? 'bg-red-50 dark:bg-red-900/20 border-red-200 dark:border-red-700' : 
                               'bg-gray-50 dark:bg-gray-700 border-gray-200 dark:border-gray-600';
                
                return `
                    <div class="maintenance-shop p-3 border-2 ${bgClass} rounded-lg cursor-pointer hover:shadow-md transition-all" 
                         data-shop="${shop.name}" data-availability="${shop.availability}">
                        <div class="flex items-center justify-between mb-2">
                            <h5 class="text-sm font-semibold text-gray-900 dark:text-white">${shop.name}</h5>
                            <div class="w-3 h-3 ${statusClass} rounded-full"></div>
                        </div>
                        <div class="text-xs text-gray-600 dark:text-gray-400 space-y-1">
                            <div class="flex justify-between">
                                <span>Distancia:</span>
                                <span class="font-medium">${shop.distance}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>En progreso:</span>
                                <span class="font-medium">${shop.units} unidades</span>
                            </div>
                            <div class="text-xs text-gray-500 dark:text-gray-500 mt-1">
                                ${shop.speciality}
                            </div>
                            <div class="text-xs font-medium mt-2 ${shop.availability === 'disponible' ? 'text-green-600 dark:text-green-400' : 
                                                                    shop.availability === 'ocupado' ? 'text-red-600 dark:text-red-400' : 
                                                                    'text-gray-600 dark:text-gray-400'}">
                                ${shop.availability === 'disponible' ? 'Disponible' : 
                                  shop.availability === 'ocupado' ? 'Ocupado' : 'En Mantenimiento'}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function generateCalendarGrid() {
            const days = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'];
            const dates = ['11', '12', '13', '14', '15', '16', '17'];
            const hours = Array.from({length: 14}, (_, i) => i + 6); // 6 AM to 7 PM
            
            let gridHTML = `
                <table class="w-full">
                    <thead>
                        <tr class="bg-gray-50 dark:bg-gray-700">
                            <th class="p-2 text-left text-xs font-medium text-gray-500 dark:text-gray-300 w-20">Hora</th>
            `;
            
            days.forEach((day, index) => {
                gridHTML += `
                    <th class="p-2 text-center text-xs font-medium text-gray-500 dark:text-gray-300">
                        <div>${day}</div>
                        <div class="text-sm font-bold text-gray-900 dark:text-white">${dates[index]}</div>
                    </th>
                `;
            });
            
            gridHTML += `
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            hours.forEach(hour => {
                const isBusinessHour = hour >= 8 && hour <= 18;
                const timeStr = `${hour.toString().padStart(2, '0')}:00`;
                
                gridHTML += `<tr class="border-t border-gray-200 dark:border-gray-600">`;
                gridHTML += `<td class="p-2 text-xs font-medium text-gray-600 dark:text-gray-400 bg-gray-50 dark:bg-gray-700">${timeStr}</td>`;
                
                days.forEach((day, dayIndex) => {
                    const cellClass = isBusinessHour ? 
                        'bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/20 cursor-pointer' : 
                        'bg-gray-100 dark:bg-gray-700 cursor-not-allowed';
                    
                    // Add some sample scheduled units
                    let cellContent = '';
                    const hasScheduled = Math.random() > 0.7 && isBusinessHour;
                    
                    if (hasScheduled) {
                        const units = ['ADO-234', 'ADO-567', 'ADO-890', 'ADO-123'];
                        const randomUnit = units[Math.floor(Math.random() * units.length)];
                        cellContent = `
                            <div class="text-xs bg-blue-100 dark:bg-blue-900/30 text-blue-800 dark:text-blue-300 p-1 rounded mb-1">
                                ${randomUnit}
                            </div>
                        `;
                    }
                    
                    gridHTML += `
                        <td class="p-1 h-12 border-l border-gray-200 dark:border-gray-600 ${cellClass} calendar-slot" 
                            data-day="${dayIndex}" data-hour="${hour}" data-time="${timeStr}" data-available="${isBusinessHour}">
                            ${cellContent}
                        </td>
                    `;
                });
                
                gridHTML += `</tr>`;
            });
            
            gridHTML += `
                    </tbody>
                </table>
            `;
            
            return gridHTML;
        }

        function initializeCalendarFunctionality(unit, issue, location) {
            // Close modal functionality
            document.getElementById('close-calendar-modal').addEventListener('click', () => {
                document.getElementById('maintenance-calendar-modal').remove();
            });

            // Shop selection
            document.querySelectorAll('.maintenance-shop').forEach(shop => {
                shop.addEventListener('click', function() {
                    if (this.getAttribute('data-availability') === 'disponible') {
                        // Remove previous selection
                        document.querySelectorAll('.maintenance-shop').forEach(s => s.classList.remove('ring-2', 'ring-blue-500'));
                        // Add selection to current
                        this.classList.add('ring-2', 'ring-blue-500');
                    }
                });
            });

            // Calendar slot selection
            document.querySelectorAll('.calendar-slot').forEach(slot => {
                slot.addEventListener('click', function() {
                    if (this.getAttribute('data-available') === 'true') {
                        // Remove previous selection
                        document.querySelectorAll('.calendar-slot').forEach(s => {
                            s.classList.remove('bg-blue-200', 'dark:bg-blue-800');
                        });
                        
                        // Add selection to current
                        this.classList.add('bg-blue-200', 'dark:bg-blue-800');
                        
                        // Update selected slot display
                        const day = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'][this.getAttribute('data-day')];
                        const time = this.getAttribute('data-time');
                        document.getElementById('selected-slot').textContent = `${day} ${time}`;
                        
                        // Enable confirm button
                        document.getElementById('confirm-scheduling').disabled = false;
                        document.getElementById('confirm-scheduling').classList.remove('bg-gray-400', 'cursor-not-allowed');
                        document.getElementById('confirm-scheduling').classList.add('bg-blue-600', 'hover:bg-blue-700');
                    }
                });
            });

            // Cancel scheduling
            document.getElementById('cancel-scheduling').addEventListener('click', () => {
                document.getElementById('maintenance-calendar-modal').remove();
            });

            // Confirm scheduling
            document.getElementById('confirm-scheduling').addEventListener('click', () => {
                const selectedShop = document.querySelector('.maintenance-shop.ring-2');
                const selectedSlot = document.querySelector('.calendar-slot.bg-blue-200, .calendar-slot.dark\\:bg-blue-800');
                
                if (selectedShop && selectedSlot) {
                    const shopName = selectedShop.getAttribute('data-shop');
                    const day = ['Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado', 'Domingo'][selectedSlot.getAttribute('data-day')];
                    const time = selectedSlot.getAttribute('data-time');
                    
                    showCustomAlert(`Mantenimiento programado exitosamente para ${unit} en ${shopName} el ${day} a las ${time}`, 'success');
                    document.getElementById('maintenance-calendar-modal').remove();
                } else {
                    showCustomAlert('Por favor seleccione un taller y un horario', 'error');
                }
            });

            // Close modal when clicking outside
            document.getElementById('maintenance-calendar-modal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.remove();
                }
            });
        }

        // Custom alert function (since alert() is not allowed)
        function showCustomAlert(message, type = 'info') {
            const alertDiv = document.createElement('div');
            alertDiv.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg ${type === 'success' ? 'bg-green-100 text-green-800 border-green-200' : type === 'error' ? 'bg-red-100 text-red-800 border-red-200' : 'bg-blue-100 text-blue-800 border-blue-200'} border`;
            alertDiv.innerHTML = `
                <div class="flex items-center">
                    <i class="fas ${type === 'success' ? 'fa-check-circle' : type === 'error' ? 'fa-times-circle' : 'fa-info-circle'} mr-2"></i>
                    <span>${message}</span>
                    <button onclick="this.parentElement.parentElement.remove()" class="ml-4 text-gray-500 hover:text-gray-700">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            `;
            document.body.appendChild(alertDiv);

            // Auto remove after 3 seconds
            setTimeout(() => {
                if (alertDiv.parentNode) {
                    alertDiv.remove();
                }
            }, 3000);
        }

        // Google Maps Integration
        let map;
        let markers = [];
        let routesVisible = false;
        let trafficVisible = false;
        let trafficLayer;
        
        // Sample fleet data with Mexican locations
        const fleetData = [
            {
                id: 'ADO-001',
                position: { lat: 19.4326, lng: -99.1332 }, // CDMX
                status: 'operational',
                model: 'Scania Touring',
                route: 'CDMX-Guadalajara',
                speed: '85 km/h',
                fuel: '78%',
                lastMaintenance: '2024-02-15',
                driver: 'Carlos Hern√°ndez',
                efficiency: 96
            },
            {
                id: 'ADO-045',
                position: { lat: 20.6597, lng: -103.3496 }, // Guadalajara
                status: 'maintenance',
                model: 'Mercedes O500',
                route: 'Monterrey-Canc√∫n',
                speed: '0 km/h',
                fuel: '42%',
                lastMaintenance: '2024-02-28',
                driver: 'Roberto Silva',
                efficiency: 71
            },
            {
                id: 'ADO-089',
                position: { lat: 25.6866, lng: -100.3161 }, // Monterrey
                status: 'operational',
                model: 'Irizar i6',
                route: 'CDMX-Monterrey',
                speed: '92 km/h',
                fuel: '65%',
                lastMaintenance: '2024-03-01',
                driver: 'Ana Morales',
                efficiency: 88
            },
            {
                id: 'ADO-156',
                position: { lat: 21.1619, lng: -86.8515 }, // Canc√∫n
                status: 'critical',
                model: 'Volvo 9700',
                route: 'Guadalajara-Canc√∫n',
                speed: '0 km/h',
                fuel: '15%',
                lastMaintenance: '2024-01-20',
                driver: 'Miguel Torres',
                efficiency: 32
            },
            {
                id: 'ADO-203',
                position: { lat: 17.0732, lng: -96.7266 }, // Oaxaca
                status: 'operational',
                model: 'Marcopolo G7',
                route: 'CDMX-Oaxaca',
                speed: '78 km/h',
                fuel: '88%',
                lastMaintenance: '2024-03-10',
                driver: 'Elena V√°squez',
                efficiency: 83
            },
            {
                id: 'ADO-234',
                position: { lat: 19.0414, lng: -98.2063 }, // Puebla
                status: 'operational',
                model: 'Volvo 9700',
                route: 'CDMX-Guadalajara',
                speed: '88 km/h',
                fuel: '72%',
                lastMaintenance: '2024-02-20',
                driver: 'Jorge Ram√≠rez',
                efficiency: 90
            },
            {
                id: 'ADO-342',
                position: { lat: 20.9673, lng: -89.5926 }, // M√©rida
                status: 'maintenance',
                model: 'Irizar i6',
                route: 'Guadalajara-Canc√∫n',
                speed: '0 km/h',
                fuel: '38%',
                lastMaintenance: '2024-02-05',
                driver: 'Patricia L√≥pez',
                efficiency: 68
            },
            {
                id: 'ADO-478',
                position: { lat: 19.8077, lng: -90.5364 }, // Campeche
                status: 'operational',
                model: 'Mercedes O500',
                route: 'Guadalajara-Canc√∫n',
                speed: '82 km/h',
                fuel: '91%',
                lastMaintenance: '2024-03-05',
                driver: 'Fernando D√≠az',
                efficiency: 85
            }
        ];

        function initMap() {
            // Initialize map centered on Mexico
            map = new google.maps.Map(document.getElementById('fleet-map'), {
                zoom: 6,
                center: { lat: 23.6345, lng: -102.5528 }, // Center of Mexico
                mapTypeId: 'roadmap',
                styles: [
                    {
                        featureType: 'poi',
                        elementType: 'labels',
                        stylers: [{ visibility: 'off' }]
                    }
                ]
            });

            // Initialize traffic layer
            trafficLayer = new google.maps.TrafficLayer();

            // Add fleet markers
            addFleetMarkers();

            // Add map controls event listeners
            setupMapControls();
        }

        function addFleetMarkers() {
            fleetData.forEach(unit => {
                const marker = createFleetMarker(unit);
                markers.push(marker);
            });
        }

        function createFleetMarker(unit) {
            // Define marker icons based on status
            const iconMap = {
                operational: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#22c55e" stroke="#ffffff" stroke-width="2"/>
                            <path d="M6 12h4l2-4h4l-2 4h4" stroke="#ffffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(24, 24)
                },
                maintenance: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#f59e0b" stroke="#ffffff" stroke-width="2"/>
                            <path d="M6 12h4l2-4h4l-2 4h4" stroke="#ffffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(24, 24)
                },
                critical: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#ef4444" stroke="#ffffff" stroke-width="2"/>
                            <path d="M6 12h4l2-4h4l-2 4h4" stroke="#ffffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(24, 24)
                },
                offline: {
                    url: 'data:image/svg+xml;charset=UTF-8,' + encodeURIComponent(`
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="12" cy="12" r="10" fill="#6b7280" stroke="#ffffff" stroke-width="2"/>
                            <path d="M6 12h4l2-4h4l-2 4h4" stroke="#ffffff" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    `),
                    scaledSize: new google.maps.Size(24, 24)
                }
            };

            const marker = new google.maps.Marker({
                position: unit.position,
                map: map,
                icon: iconMap[unit.status],
                title: unit.id,
                animation: google.maps.Animation.DROP
            });

            // Add click listener for marker
            marker.addListener('click', () => {
                showUnitTooltip(unit, marker);
            });

            // Add hover listeners
            marker.addListener('mouseover', () => {
                showUnitTooltip(unit, marker);
            });

            return marker;
        }

        function showUnitTooltip(unit, marker) {
            const tooltip = document.getElementById('unit-tooltip');
            
            // Update tooltip content
            document.getElementById('tooltip-unit-id').textContent = unit.id;
            document.getElementById('tooltip-model').textContent = unit.model;
            document.getElementById('tooltip-route').textContent = unit.route;
            document.getElementById('tooltip-speed').textContent = unit.speed;
            document.getElementById('tooltip-fuel').textContent = unit.fuel;
            document.getElementById('tooltip-maintenance').textContent = unit.lastMaintenance;
            document.getElementById('tooltip-driver').textContent = unit.driver;
            document.getElementById('tooltip-efficiency').textContent = unit.efficiency + '%';

            // Update status badge
            const statusElement = document.getElementById('tooltip-status');
            const statusClasses = {
                operational: 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',
                maintenance: 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',
                critical: 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300',
                offline: 'bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-300'
            };
            const statusTexts = {
                operational: 'Operativo',
                maintenance: 'Mantenimiento',
                critical: 'Cr√≠tico',
                offline: 'Fuera de Servicio'
            };
            
            statusElement.className = `px-2 py-1 rounded-full text-xs font-medium ${statusClasses[unit.status]}`;
            statusElement.textContent = statusTexts[unit.status];

            // Update efficiency bar
            const efficiencyBar = document.getElementById('tooltip-efficiency-bar');
            const efficiencyColors = {
                operational: 'bg-green-500',
                maintenance: 'bg-yellow-500',
                critical: 'bg-red-500',
                offline: 'bg-gray-500'
            };
            efficiencyBar.className = `h-2 rounded-full ${efficiencyColors[unit.status]}`;
            efficiencyBar.style.width = unit.efficiency + '%';

            // Position and show tooltip
            const mapContainer = document.getElementById('fleet-map');
            const mapRect = mapContainer.getBoundingClientRect();
            
            // Convert lat/lng to pixel coordinates (simplified positioning)
            tooltip.style.left = (mapRect.width * 0.5) + 'px';
            tooltip.style.top = (mapRect.height * 0.3) + 'px';
            tooltip.classList.remove('hidden');

            // Hide tooltip after 5 seconds
            setTimeout(() => {
                tooltip.classList.add('hidden');
            }, 5000);
        }

        function setupMapControls() {
            // Fleet map search
            const searchInput = document.getElementById('fleet-map-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    filterMapMarkers(searchTerm);
                });
            }

            // Clear search
            const clearSearch = document.getElementById('clear-map-search');
            if (clearSearch) {
                clearSearch.addEventListener('click', function() {
                    searchInput.value = '';
                    showAllMarkers();
                });
            }

            // Center map
            const centerMap = document.getElementById('center-map');
            if (centerMap) {
                centerMap.addEventListener('click', function() {
                    map.setCenter({ lat: 23.6345, lng: -102.5528 });
                    map.setZoom(6);
                });
            }

            // Toggle routes
            const toggleRoutes = document.getElementById('toggle-routes');
            if (toggleRoutes) {
                toggleRoutes.addEventListener('click', function() {
                    routesVisible = !routesVisible;
                    if (routesVisible) {
                        showRoutes();
                        this.classList.add('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                    } else {
                        hideRoutes();
                        this.classList.remove('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                    }
                });
            }

            // Toggle traffic
            const toggleTraffic = document.getElementById('toggle-traffic');
            if (toggleTraffic) {
                toggleTraffic.addEventListener('click', function() {
                    trafficVisible = !trafficVisible;
                    if (trafficVisible) {
                        trafficLayer.setMap(map);
                        this.classList.add('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                    } else {
                        trafficLayer.setMap(null);
                        this.classList.remove('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                    }
                });
            }

            // Hide tooltip when clicking elsewhere
            document.addEventListener('click', function(e) {
                const tooltip = document.getElementById('unit-tooltip');
                if (!tooltip.contains(e.target) && !e.target.closest('.gm-style')) {
                    tooltip.classList.add('hidden');
                }
            });
        }

        function filterMapMarkers(searchTerm) {
            markers.forEach(marker => {
                const unit = fleetData.find(u => u.id === marker.getTitle());
                if (unit) {
                    const matchesSearch = unit.id.toLowerCase().includes(searchTerm) ||
                                        unit.route.toLowerCase().includes(searchTerm) ||
                                        unit.model.toLowerCase().includes(searchTerm);
                    
                    marker.setVisible(matchesSearch);
                }
            });
        }

        function showAllMarkers() {
            markers.forEach(marker => marker.setVisible(true));
        }

        function showRoutes() {
            // Sample routes (in a real app, these would be actual route data)
            const routes = [
                {
                    name: 'CDMX-Guadalajara',
                    path: [
                        { lat: 19.4326, lng: -99.1332 }, // CDMX
                        { lat: 19.2465, lng: -99.5127 }, // Toluca
                        { lat: 19.7006, lng: -101.1875 }, // Morelia
                        { lat: 20.6597, lng: -103.3496 }  // Guadalajara
                    ],
                    color: '#3b82f6'
                },
                {
                    name: 'Monterrey-Canc√∫n',
                    path: [
                        { lat: 25.6866, lng: -100.3161 }, // Monterrey
                        { lat: 24.8069, lng: -99.4351 },  // Ciudad Victoria
                        { lat: 22.2765, lng: -97.8661 },  // Tampico
                        { lat: 21.1619, lng: -86.8515 }   // Canc√∫n
                    ],
                    color: '#10b981'
                }
            ];

            routes.forEach(route => {
                const routePath = new google.maps.Polyline({
                    path: route.path,
                    geodesic: true,
                    strokeColor: route.color,
                    strokeOpacity: 1.0,
                    strokeWeight: 4
                });
                
                routePath.setMap(map);
            });
        }

        function hideRoutes() {
            // In a real implementation, you'd store route polylines and remove them
            // For this demo, we'll just reload the map
            initMap();
        }

        // Make initMap available globally for Google Maps callback
        window.initMap = initMap;

        // Initialize simulated map when Google Maps is not available
        document.addEventListener('DOMContentLoaded', function() {
            // Check if Google Maps is available, if not, show simulated map
            if (typeof google === 'undefined' || !google.maps) {
                initSimulatedMap();
            }
        });

        function initSimulatedMap() {
            const mapContainer = document.getElementById('fleet-map');
            if (!mapContainer) return;
            
            mapContainer.innerHTML = `
                <div id="interactive-map" class="w-full h-full relative bg-gray-100 dark:bg-gray-700 overflow-hidden cursor-move">
                    <!-- Map Grid Background -->
                    <div class="absolute inset-0" style="background-image: linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px); background-size: 20px 20px;"></div>
                    
                    <!-- Roads and Highways -->
                    <svg class="absolute inset-0 w-full h-full pointer-events-none">
                        <!-- Highway CDMX to Guadalajara -->
                        <path d="M 100 280 Q 200 260 300 240 Q 400 220 500 200" stroke="#4B5563" stroke-width="3" fill="none" opacity="0.7"/>
                        <path d="M 100 280 Q 200 260 300 240 Q 400 220 500 200" stroke="#FCD34D" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
                        
                        <!-- Highway Monterrey to Canc√∫n -->
                        <path d="M 200 150 Q 350 180 450 250 Q 550 300 650 350" stroke="#4B5563" stroke-width="3" fill="none" opacity="0.7"/>
                        <path d="M 200 150 Q 350 180 450 250 Q 550 300 650 350" stroke="#FCD34D" stroke-width="2" fill="none" stroke-dasharray="5,5"/>
                        
                        <!-- Secondary roads -->
                        <path d="M 300 100 L 400 300" stroke="#6B7280" stroke-width="2" fill="none" opacity="0.5"/>
                        <path d="M 150 200 L 600 180" stroke="#6B7280" stroke-width="2" fill="none" opacity="0.5"/>
                    </svg>
                    
                    <!-- City Labels -->
                    <div class="absolute top-16 left-20 text-xs font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm">
                        CDMX
                    </div>
                    <div class="absolute top-12 left-48 text-xs font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm">
                        Monterrey
                    </div>
                    <div class="absolute top-32 right-32 text-xs font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm">
                        Guadalajara
                    </div>
                    <div class="absolute bottom-16 right-8 text-xs font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm">
                        Canc√∫n
                    </div>
                    <div class="absolute bottom-24 left-72 text-xs font-semibold text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-800 px-2 py-1 rounded shadow-sm">
                        Oaxaca
                    </div>
                    
                    <!-- Fleet Units with interactive markers -->
                    <div class="fleet-marker operational animate-pulse" data-unit="ADO-001" data-status="operational" style="position: absolute; top: 70%; left: 12%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-001</div>
                    </div>
                    
                    <div class="fleet-marker maintenance" data-unit="ADO-045" data-status="maintenance" style="position: absolute; top: 25%; left: 45%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-yellow-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-045</div>
                    </div>
                    
                    <div class="fleet-marker operational animate-pulse" data-unit="ADO-089" data-status="operational" style="position: absolute; top: 15%; left: 25%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-089</div>
                    </div>
                    
                    <div class="fleet-marker critical animate-pulse" data-unit="ADO-156" data-status="critical" style="position: absolute; top: 85%; left: 85%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-red-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-156</div>
                    </div>
                    
                    <div class="fleet-marker operational animate-pulse" data-unit="ADO-203" data-status="operational" style="position: absolute; top: 75%; left: 65%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-203</div>
                    </div>
                    
                    <div class="fleet-marker operational animate-pulse" data-unit="ADO-234" data-status="operational" style="position: absolute; top: 55%; left: 35%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-234</div>
                    </div>
                    
                    <div class="fleet-marker maintenance" data-unit="ADO-342" data-status="maintenance" style="position: absolute; top: 60%; left: 75%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-yellow-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-342</div>
                    </div>
                    
                    <div class="fleet-marker operational animate-pulse" data-unit="ADO-478" data-status="operational" style="position: absolute; top: 45%; left: 70%; transform: translate(-50%, -50%);">
                        <div class="w-6 h-6 bg-green-500 rounded-full border-2 border-white shadow-lg cursor-pointer hover:scale-110 transition-transform flex items-center justify-center">
                            <i class="fas fa-bus text-white text-xs"></i>
                        </div>
                        <div class="mt-1 text-xs font-semibold text-center bg-white dark:bg-gray-800 px-1 rounded shadow">ADO-478</div>
                    </div>
                    
                    <!-- Zoom Controls -->
                    <div class="absolute bottom-4 right-4 flex flex-col space-y-1 z-10">
                        <button id="zoom-in" class="w-8 h-8 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow hover:shadow-md flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200">
                            <i class="fas fa-plus text-xs"></i>
                        </button>
                        <button id="zoom-out" class="w-8 h-8 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow hover:shadow-md flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200">
                            <i class="fas fa-minus text-xs"></i>
                        </button>
                        <button id="reset-view" class="w-8 h-8 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow hover:shadow-md flex items-center justify-center text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200">
                            <i class="fas fa-home text-xs"></i>
                        </button>
                    </div>
                    
                    <!-- Scale indicator -->
                    <div class="absolute bottom-4 left-4 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-2 py-1 text-xs text-gray-600 dark:text-gray-400">
                        <span id="scale-text">1:500,000</span>
                    </div>
                </div>
            `;
            
            // Initialize interactive map features
            initInteractiveMapFeatures();
        }

        function initInteractiveMapFeatures() {
            const mapContainer = document.getElementById('interactive-map');
            if (!mapContainer) return;

            let currentZoom = 1;
            let isDragging = false;
            let dragStart = { x: 0, y: 0 };
            let currentTransform = { x: 0, y: 0 };

            // Sample fleet data for tooltips
            const fleetData = {
                'ADO-001': {
                    model: 'Scania Touring',
                    route: 'CDMX-Guadalajara',
                    speed: '85 km/h',
                    fuel: '78%',
                    driver: 'Carlos Hern√°ndez',
                    efficiency: 96,
                    status: 'Operativo'
                },
                'ADO-045': {
                    model: 'Mercedes O500',
                    route: 'Monterrey-Canc√∫n',
                    speed: '0 km/h',
                    fuel: '42%',
                    driver: 'Roberto Silva',
                    efficiency: 71,
                    status: 'Mantenimiento'
                },
                'ADO-089': {
                    model: 'Irizar i6',
                    route: 'CDMX-Monterrey',
                    speed: '92 km/h',
                    fuel: '65%',
                    driver: 'Ana Morales',
                    efficiency: 88,
                    status: 'Operativo'
                },
                'ADO-156': {
                    model: 'Volvo 9700',
                    route: 'Guadalajara-Canc√∫n',
                    speed: '0 km/h',
                    fuel: '15%',
                    driver: 'Miguel Torres',
                    efficiency: 32,
                    status: 'Cr√≠tico'
                },
                'ADO-203': {
                    model: 'Marcopolo G7',
                    route: 'CDMX-Oaxaca',
                    speed: '78 km/h',
                    fuel: '88%',
                    driver: 'Elena V√°squez',
                    efficiency: 83,
                    status: 'Operativo'
                },
                'ADO-234': {
                    model: 'Volvo 9700',
                    route: 'CDMX-Guadalajara',
                    speed: '88 km/h',
                    fuel: '72%',
                    driver: 'Jorge Ram√≠rez',
                    efficiency: 90,
                    status: 'Operativo'
                },
                'ADO-342': {
                    model: 'Irizar i6',
                    route: 'Guadalajara-Canc√∫n',
                    speed: '0 km/h',
                    fuel: '38%',
                    driver: 'Patricia L√≥pez',
                    efficiency: 68,
                    status: 'Mantenimiento'
                },
                'ADO-478': {
                    model: 'Mercedes O500',
                    route: 'Guadalajara-Canc√∫n',
                    speed: '82 km/h',
                    fuel: '91%',
                    driver: 'Fernando D√≠az',
                    efficiency: 85,
                    status: 'Operativo'
                }
            };

            // Zoom controls
            document.getElementById('zoom-in')?.addEventListener('click', () => {
                currentZoom = Math.min(currentZoom * 1.2, 3);
                updateMapTransform();
                updateScale();
            });

            document.getElementById('zoom-out')?.addEventListener('click', () => {
                currentZoom = Math.max(currentZoom / 1.2, 0.5);
                updateMapTransform();
                updateScale();
            });

            document.getElementById('reset-view')?.addEventListener('click', () => {
                currentZoom = 1;
                currentTransform = { x: 0, y: 0 };
                updateMapTransform();
                updateScale();
            });

            // Pan functionality
            mapContainer.addEventListener('mousedown', (e) => {
                isDragging = true;
                dragStart = { x: e.clientX - currentTransform.x, y: e.clientY - currentTransform.y };
                mapContainer.style.cursor = 'grabbing';
            });

            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                currentTransform.x = e.clientX - dragStart.x;
                currentTransform.y = e.clientY - dragStart.y;
                updateMapTransform();
            });

            document.addEventListener('mouseup', () => {
                isDragging = false;
                mapContainer.style.cursor = 'move';
            });

            // Fleet marker interactions
            document.querySelectorAll('.fleet-marker').forEach(marker => {
                marker.addEventListener('click', (e) => {
                    e.stopPropagation();
                    const unitId = marker.getAttribute('data-unit');
                    const unit = fleetData[unitId];
                    if (unit) {
                        showUnitTooltipSimulated(unit, marker, unitId);
                    }
                });

                marker.addEventListener('mouseenter', (e) => {
                    const unitId = marker.getAttribute('data-unit');
                    const unit = fleetData[unitId];
                    if (unit) {
                        showQuickTooltip(unit, marker, unitId, e);
                    }
                });

                marker.addEventListener('mouseleave', () => {
                    hideQuickTooltip();
                });
            });

            function updateMapTransform() {
                const elements = mapContainer.querySelectorAll('svg, .fleet-marker, div[class*="absolute"]:not(.absolute.bottom-4):not(.absolute.top-4)');
                elements.forEach(el => {
                    el.style.transform = `scale(${currentZoom}) translate(${currentTransform.x / currentZoom}px, ${currentTransform.y / currentZoom}px)`;
                });
            }

            function updateScale() {
                const scaleText = document.getElementById('scale-text');
                if (scaleText) {
                    const scale = Math.round(500000 / currentZoom);
                    scaleText.textContent = `1:${scale.toLocaleString()}`;
                }
            }

            function showQuickTooltip(unit, marker, unitId, event) {
                hideQuickTooltip(); // Remove any existing tooltip
                
                const tooltip = document.createElement('div');
                tooltip.id = 'quick-tooltip';
                tooltip.className = 'absolute z-50 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg shadow-xl p-3 text-xs min-w-max';
                tooltip.innerHTML = `
                    <div class="font-semibold text-gray-900 dark:text-white">${unitId}</div>
                    <div class="text-gray-600 dark:text-gray-400">${unit.model}</div>
                    <div class="text-gray-600 dark:text-gray-400">${unit.route}</div>
                    <div class="flex items-center mt-1">
                        <div class="w-2 h-2 ${unit.status === 'Operativo' ? 'bg-green-500' : unit.status === 'Mantenimiento' ? 'bg-yellow-500' : 'bg-red-500'} rounded-full mr-2"></div>
                        <span class="text-gray-700 dark:text-gray-300">${unit.status}</span>
                    </div>
                `;

                const rect = marker.getBoundingClientRect();
                const mapRect = mapContainer.getBoundingClientRect();
                tooltip.style.left = (rect.left - mapRect.left + 30) + 'px';
                tooltip.style.top = (rect.top - mapRect.top - 10) + 'px';
                
                mapContainer.appendChild(tooltip);
            }

            function hideQuickTooltip() {
                const existingTooltip = document.getElementById('quick-tooltip');
                if (existingTooltip) {
                    existingTooltip.remove();
                }
            }

            function showUnitTooltipSimulated(unit, marker, unitId) {
                const tooltip = document.getElementById('unit-tooltip');
                if (!tooltip) return;
                
                // Update tooltip content
                document.getElementById('tooltip-unit-id').textContent = unitId;
                document.getElementById('tooltip-model').textContent = unit.model;
                document.getElementById('tooltip-route').textContent = unit.route;
                document.getElementById('tooltip-speed').textContent = unit.speed;
                document.getElementById('tooltip-fuel').textContent = unit.fuel;
                document.getElementById('tooltip-maintenance').textContent = '2024-02-15';
                document.getElementById('tooltip-driver').textContent = unit.driver;
                document.getElementById('tooltip-efficiency').textContent = unit.efficiency + '%';

                // Update status badge
                const statusElement = document.getElementById('tooltip-status');
                const statusClasses = {
                    'Operativo': 'bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300',
                    'Mantenimiento': 'bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300',
                    'Cr√≠tico': 'bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300'
                };
                
                statusElement.className = `px-2 py-1 rounded-full text-xs font-medium ${statusClasses[unit.status]}`;
                statusElement.textContent = unit.status;

                // Update efficiency bar
                const efficiencyBar = document.getElementById('tooltip-efficiency-bar');
                const efficiencyColors = {
                    'Operativo': 'bg-green-500',
                    'Mantenimiento': 'bg-yellow-500',
                    'Cr√≠tico': 'bg-red-500'
                };
                efficiencyBar.className = `h-2 rounded-full ${efficiencyColors[unit.status]}`;
                efficiencyBar.style.width = unit.efficiency + '%';

                // Position and show tooltip
                const mapRect = mapContainer.getBoundingClientRect();
                const markerRect = marker.getBoundingClientRect();
                
                tooltip.style.left = (markerRect.left - mapRect.left + 30) + 'px';
                tooltip.style.top = (markerRect.top - mapRect.top - 50) + 'px';
                tooltip.classList.remove('hidden');

                // Hide tooltip after 5 seconds
                setTimeout(() => {
                    tooltip.classList.add('hidden');
                }, 5000);
            }

            // Search functionality for the simulated map
            const searchInput = document.getElementById('fleet-map-search');
            if (searchInput) {
                searchInput.addEventListener('input', function() {
                    const searchTerm = this.value.toLowerCase();
                    document.querySelectorAll('.fleet-marker').forEach(marker => {
                        const unitId = marker.getAttribute('data-unit').toLowerCase();
                        const unit = fleetData[marker.getAttribute('data-unit')];
                        const matchesSearch = unitId.includes(searchTerm) ||
                                            (unit && (unit.route.toLowerCase().includes(searchTerm) ||
                                                     unit.model.toLowerCase().includes(searchTerm)));
                        
                        if (matchesSearch || searchTerm === '') {
                            marker.style.opacity = '1';
                            marker.style.transform = marker.style.transform.replace('scale(0)', 'scale(1)');
                        } else {
                            marker.style.opacity = '0.3';
                        }
                    });
                });
            }

            // Clear search
            document.getElementById('clear-map-search')?.addEventListener('click', () => {
                if (searchInput) searchInput.value = '';
                document.querySelectorAll('.fleet-marker').forEach(marker => {
                    marker.style.opacity = '1';
                });
            });

            // Route toggle functionality
            let routesVisible = false;
            document.getElementById('toggle-routes')?.addEventListener('click', function() {
                routesVisible = !routesVisible;
                const routePaths = mapContainer.querySelectorAll('svg path');
                routePaths.forEach(path => {
                    path.style.opacity = routesVisible ? '1' : '0.3';
                });
                
                if (routesVisible) {
                    this.classList.add('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                } else {
                    this.classList.remove('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                }
            });

            // Traffic toggle (simulated)
            let trafficVisible = false;
            document.getElementById('toggle-traffic')?.addEventListener('click', function() {
                trafficVisible = !trafficVisible;
                
                // Add traffic indicators
                if (trafficVisible) {
                    const trafficIndicators = mapContainer.querySelectorAll('.traffic-indicator');
                    if (trafficIndicators.length === 0) {
                        // Add some traffic indicators
                        const trafficHTML = `
                            <div class="traffic-indicator absolute top-1/2 left-1/3 w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
                            <div class="traffic-indicator absolute top-1/3 left-1/2 w-2 h-2 bg-yellow-500 rounded-full animate-pulse"></div>
                            <div class="traffic-indicator absolute top-2/3 right-1/3 w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
                        `;
                        mapContainer.insertAdjacentHTML('beforeend', trafficHTML);
                    }
                    this.classList.add('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                } else {
                    const trafficIndicators = mapContainer.querySelectorAll('.traffic-indicator');
                    trafficIndicators.forEach(indicator => indicator.remove());
                    this.classList.remove('bg-blue-100', 'dark:bg-blue-900', 'text-blue-700', 'dark:text-blue-300');
                }
            });
        }
    </script>


</body></html>